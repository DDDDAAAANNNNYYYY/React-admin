[{"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\index.js":"1","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\App.js":"2","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\serviceWorker.js":"3","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\memoryUtils.js":"4","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\storageUtils.js":"5","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\login\\index.jsx":"6","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\admin\\index.jsx":"7","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\api\\index.js":"8","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\api\\ajax.jsx":"9","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\home\\index.jsx":"10","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\users\\index.jsx":"11","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\category\\index.jsx":"12","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\product\\index.jsx":"13","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\role\\index.jsx":"14","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\component\\left-nav\\index.jsx":"15","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\component\\header\\index.jsx":"16","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\role\\add-form.jsx":"17","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\dataUtils.js":"18","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\constant.js":"19","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\config\\menuConfig.js":"20","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\users\\user-form.jsx":"21","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\category\\addform.jsx":"22","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\role\\setTree.jsx":"23","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\category\\updateform.jsx":"24","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\component\\link-button\\index.jsx":"25"},{"size":649,"mtime":1618509129757,"results":"26","hashOfConfig":"27"},{"size":655,"mtime":1618509129725,"results":"28","hashOfConfig":"27"},{"size":5086,"mtime":1618509129784,"results":"29","hashOfConfig":"27"},{"size":144,"mtime":1618509129789,"results":"30","hashOfConfig":"27"},{"size":760,"mtime":1618509129790,"results":"31","hashOfConfig":"27"},{"size":5114,"mtime":1618531624837,"results":"32","hashOfConfig":"27"},{"size":1830,"mtime":1618531341116,"results":"33","hashOfConfig":"27"},{"size":3737,"mtime":1618509129728,"results":"34","hashOfConfig":"27"},{"size":1200,"mtime":1618509129727,"results":"35","hashOfConfig":"27"},{"size":266,"mtime":1618509129765,"results":"36","hashOfConfig":"27"},{"size":5976,"mtime":1618509129781,"results":"37","hashOfConfig":"27"},{"size":7016,"mtime":1618509129763,"results":"38","hashOfConfig":"27"},{"size":11815,"mtime":1618531815605,"results":"39","hashOfConfig":"27"},{"size":5303,"mtime":1618509129779,"results":"40","hashOfConfig":"27"},{"size":3869,"mtime":1618509129748,"results":"41","hashOfConfig":"27"},{"size":2775,"mtime":1618509129745,"results":"42","hashOfConfig":"27"},{"size":1132,"mtime":1618509129777,"results":"43","hashOfConfig":"27"},{"size":254,"mtime":1618509129788,"results":"44","hashOfConfig":"27"},{"size":139,"mtime":1618509129787,"results":"45","hashOfConfig":"27"},{"size":955,"mtime":1618509129755,"results":"46","hashOfConfig":"27"},{"size":2683,"mtime":1618509129782,"results":"47","hashOfConfig":"27"},{"size":1235,"mtime":1618509129761,"results":"48","hashOfConfig":"27"},{"size":2080,"mtime":1618509129780,"results":"49","hashOfConfig":"27"},{"size":844,"mtime":1618509129763,"results":"50","hashOfConfig":"27"},{"size":244,"mtime":1618509129753,"results":"51","hashOfConfig":"27"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},"sjd8wv",{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"65","messages":"66","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75","usedDeprecatedRules":"54"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"80","messages":"81","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"82","usedDeprecatedRules":"54"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"85","usedDeprecatedRules":"54"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"90","usedDeprecatedRules":"54"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"97","usedDeprecatedRules":"54"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"102","usedDeprecatedRules":"54"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"105","usedDeprecatedRules":"54"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"108","usedDeprecatedRules":"54"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\index.js",[],["111","112"],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\App.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\serviceWorker.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\memoryUtils.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\storageUtils.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\login\\index.jsx",["113","114"],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\admin\\index.jsx",["115"],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\api\\index.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\api\\ajax.jsx",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\home\\index.jsx",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\users\\index.jsx",["116","117","118","119","120","121","122","123"],"import React, { Component } from \"react\";\r\nimport { Button, Card, Table, Modal, message } from \"antd\";\r\nimport { PAGE_SIZE } from \"../../utils/constant\";\r\nimport { formateDate } from \"../../utils/dataUtils\";\r\nimport memoryUtils from \"../../utils/memoryUtils\";\r\nimport storageUtils from \"../../utils/storageUtils\";\r\nimport LinkButton from \"../../component/link-button\";\r\nimport { reqDelUser, reqUsers, reqAddOrUpdateUser } from \"../../api\";\r\nimport UserForm from \"./user-form\";\r\nexport default class Users extends Component {\r\n  state = {\r\n    users: [], \r\n    showStatus: 0,\r\n    roles: [],\r\n    user: {},\r\n    visible: 1,\r\n    more: true,\r\n  };\r\n  constructor(props) {\r\n    super(props);\r\n    this.us = React.createRef();\r\n  }\r\n  initColumns = () => {\r\n    this.columns = [\r\n      {\r\n        title: \"Week\",\r\n        dataIndex: \"username\",\r\n      },\r\n      {\r\n        title: \"Hours\",\r\n        dataIndex: \"hours\",\r\n      },\r\n      {\r\n        title: \"Status\",\r\n        dataIndex: \"submissionStatus\",\r\n      },\r\n      {\r\n        title: \"Approval\",\r\n        dataIndex: \"approvalStatus\",\r\n        // render: (create_time) => formateDate(create_time),\r\n      },\r\n      {\r\n        title: \"Comments\",\r\n        dataIndex: \"comments\",\r\n        // render: (role_id) =>\r\n        //   // {\r\n        //   //     const role=this.state.roles.find(role=>role._id===role_id)\r\n        //   //     return role?role.name:''}\r\n        //   //防止反复生成\r\n        //   this.roleNames[role_id],\r\n      },\r\n      {\r\n        title: \"Options\",\r\n        render: (user,text, index) => (\r\n\r\n\r\n            <span>\r\n            {/* <LinkButton onClick={() => this.showUpdate(user)}>修改</LinkButton> */}\r\n              {/* <LinkButton onClick={() => this.deleteUser(user)}>删除</LinkButton> */}\r\n              {/* <LinkButton onClick={() => this._handleButtonClick(user)}>go</LinkButton> */}\r\n\r\n              <LinkButton onClick={()=>{this.props.history.push('/product', {user});\r\n                storageUtils.saveIndex(index);\r\n                alert(index);\r\n              }}>{user.option}</LinkButton>\r\n          </span>\r\n        ),\r\n      },\r\n    ];\r\n  };\r\n  \r\n  \r\n\r\n  /* 删除指定用户 */\r\n\r\n  // deleteUser = (user) => {\r\n  //   Modal.confirm({\r\n  //     title: `确认删除${user.username}吗?`,\r\n\r\n  //     onOk: async () => {\r\n  //       const result = await reqDelUser(user._id);\r\n  //       if (result.status === 0) {\r\n  //         message.success(\"删除用户成功!\");\r\n  //         this.getUsers();\r\n  //       } else {\r\n  //         message.error(\"删除用户失败!\");\r\n  //       }\r\n  //     },\r\n  //   });\r\n  // };\r\n  \r\n  getUsers = async () => {\r\n    const name = memoryUtils.user.name;\r\n    const result = await reqUsers(name);\r\n    if (true) {\r\n      const  users  = result;\r\n      console.log(result)\r\n      console.log(users)\r\n      storageUtils.saveList(result);\r\n      // this.initRoles(roles);\r\n      this.setState({ users});\r\n    } else {\r\n      message.error(\"failsed\");\r\n    }\r\n  };\r\n  // addOrUpdateuser = async () => {\r\n    \r\n  //   //收集数据\r\n  //   let user = this.us.current.addOrUpdateUser();\r\n  //   user.create_time = Date.now();\r\n  //   if (this.state.user._id) {\r\n  //     user._id = this.state.user._id;\r\n  //   }\r\n  //   //   2.提交添加的请求\r\n  //   const result = await reqAddOrUpdateUser(user);\r\n  //   // 3.更新列表显示\r\n  //   if (result.status === 0) {\r\n  //     message.success(`${this.state.user._id?'修改':'添加'}角色成功`);\r\n  //     this.getUsers();\r\n  //     this.setState({ showStatus: 0 });\r\n  //   } else {\r\n  //     message.error(`${this.state.user._id?'修改':'添加'}角色失败`);\r\n  //   }\r\n  //   // //console.log(user);\r\n  // };\r\n  // showUpdate = (user) => {\r\n  //   this.state.user = user;\r\n  //   this.setState({ showStatus: 1 });\r\n  // };\r\n  UNSAFE_componentWillMount() {\r\n    this.initColumns();\r\n  }\r\n  componentDidMount() {\r\n    this.getUsers();\r\n  }\r\n  // handleCancel = () => {\r\n  //   alert(\"here\")\r\n  //   this.setState({ showStatus: 0 });\r\n  // };\r\n  render() {\r\n    const { users, showStatus, roles } = this.state;\r\n    ////console.log(users);\r\n    // const title = (\r\n    //   <Button\r\n    //     type=\"primary\"\r\n    //     onClick={() => {\r\n    //       this.setState({ showStatus: 1, user: {} });\r\n    //     }}\r\n    //   >\r\n    //     创建用户\r\n    //   </Button>\r\n    // );\r\n    return (\r\n      \r\n      <Card >\r\n        <Table\r\n          // rowKey=\"_id\"\r\n          // pagination={{\r\n          //   pageSize: 1,\r\n          //   // , total: 50\r\n          // }}\r\n          pagination={ false }\r\n          dataSource={users.slice(0,this.state.visible)}\r\n          columns={this.columns}\r\n          bordered\r\n          \r\n        />\r\n        {/* {users.slice(0,1).map((x, i) => {\r\n        return <div key={i} className=\"box\">\r\n          \r\n          <div className=\"name\"><span>{x.username}</span> \r\n          <span>                  </span>\r\n          <span>{x.totalHours}</span></div>  \r\n          <div className=\"name\"> </div>     \r\n        </div>\r\n      })} */}\r\n      <div style={{ display: this.state.more ? \"block\" : \"none\"}}>\r\n          <Button onClick={()=>{this.setState({visible:this.state.visible+1,\r\n          more: !this.state.more\r\n          })}} type=\"button\" className=\"load-more\">Load more</Button>\r\n          </div>\r\n          <div style={{ display: this.state.more ? \"none\" : \"block\"}}>\r\n          <Button onClick={()=>{this.setState({visible:1,\r\n          more: !this.state.more\r\n          })}} type=\"button\" className=\"load-more\">Load less</Button>\r\n          </div>\r\n\r\n        {/* <Modal\r\n          title={this.state.user._id ? \"修改用户\" : \"添加用户\"}\r\n          visible={showStatus === 1}\r\n          onOk={this.addOrUpdateuser}\r\n          onCancel={this.handleCancel}\r\n          destroyOnClose={true}\r\n        >\r\n          <UserForm roles={roles} ref={this.us} user={this.state.user} />\r\n         \r\n        </Modal> */}\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\category\\index.jsx",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\product\\index.jsx",["124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139"],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\role\\index.jsx",["140"],"import React, { Component, } from \"react\";\r\nimport { Card, Button, Table, Modal, message } from \"antd\";\r\nimport { PAGE_SIZE } from \"../../utils/constant\";\r\nimport { reqRoleList, reqAddRole ,reqUpdateRole} from \"../../api\";\r\nimport AddForm from \"./add-form.jsx\";\r\nimport SetTree from \"./setTree\";\r\nimport { get } from \"store\";\r\nimport memoryUtils from '../../utils/memoryUtils'\r\nimport {formateDate} from '../../utils/dataUtils'\r\nimport storageUtils from \"../../utils/storageUtils\";\r\n/* 角色路由 */\r\nexport default class Role extends Component {\r\n  state = {\r\n    loading: false,\r\n    roles: [],\r\n    role: {},\r\n    showStatus: 0,\r\n  };\r\n  constructor(props){\r\n      super(props)\r\n      this.auth= React.createRef()\r\n  }\r\n  getRoles = async () => {\r\n    const result = await reqRoleList();\r\n    if (result.status === 0) {\r\n      const roles = result.data;\r\n      this.setState({\r\n        roles,\r\n      });\r\n    }\r\n  };\r\n  initColumn = () => {\r\n    this.columns = [\r\n      {\r\n        title: \"角色名称\",\r\n        dataIndex: \"name\",\r\n      },\r\n      {\r\n        title: \"创建时间\",\r\n        dataIndex: \"create_time\",\r\n        render:(create_time)=>formateDate(create_time)\r\n      },\r\n      {\r\n        title: \"授权时间\",\r\n        dataIndex: \"auth_time\",\r\n        render:(auth_time)=>formateDate(auth_time)\r\n      },\r\n      {\r\n        title: \"授权人\",\r\n        dataIndex: \"auth_name\",\r\n      },\r\n    ];\r\n  };\r\n  handleCancel = () => {\r\n    this.setState({ showStatus: 0 });\r\n  };\r\n  addRole = async () => {\r\n    const result = await reqAddRole(this.input.props.value);\r\n    if (result.status === 0) {\r\n      message.success(\"添加角色成功\");\r\n      // this.getRoles()\r\n      // 可以不请求直接添加到roles列表\r\n      const role = result.data;\r\n      // const roles =[...this.state.roles]\r\n      // roles.push(role)\r\n      // this.setState({roles:roles})\r\n      this.setState((state) => ({\r\n        roles: [...state.roles, role],\r\n      }));\r\n    } else {\r\n      message.error(\"添加角色失败\");\r\n    }\r\n    this.setState({ showStatus: 0 });\r\n  };\r\n  setRole = async() => {\r\n    //   console.log('select',select)\r\n     const menus =  this.auth.current.getMenus()\r\n     const role = this.state.role\r\n     role.menus=menus\r\n     role.auth_time = Date.now()\r\n     role.auth_name = memoryUtils.user.username\r\n    //  console.log(role)\r\n     const result = await reqUpdateRole(role)\r\n     if(result.status===0){\r\n         message.success('设置权限成功')\r\n         //如果更新的是自己角色权限,强制退出\r\n        if(memoryUtils.user.username!=='admin'&&role._id===memoryUtils.user.role_id){\r\n          memoryUtils.user={}\r\n          storageUtils.deleteUser()\r\n          this.props.history.replace('./login')\r\n          message.info('权限已更改,请重新登录')\r\n        }\r\n     }else{\r\n         message.error('设置权限失败')\r\n     }\r\n    this.setState({ showStatus: 0 });\r\n  };\r\n  componentDidMount() {\r\n    this.getRoles();\r\n  }\r\n  UNSAFE_componentWillMount() {\r\n    this.initColumn();\r\n  }\r\n  render() {\r\n    const { roles, role, showStatus } = this.state;\r\n    // const {username, totalHours, comments, approvalStatus,submissionStatus}=this.props.location.state.user\r\n    const title = (\r\n      <span>\r\n        <Button type=\"primary\" onClick={() => this.setState({ showStatus: 1 })}>\r\n          创建角色\r\n        </Button>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => this.setState({ showStatus: 2 })}\r\n          disabled={!role._id}\r\n        >\r\n          设置角色权限\r\n        </Button>\r\n      </span>\r\n    );\r\n\r\n    // console.log(roles)\r\n    // console.log(this.columns)\r\n    return (\r\n      <Card title={title}>\r\n        <Table\r\n          rowKey=\"_id\"\r\n          pagination={{\r\n            pageSize: PAGE_SIZE,\r\n            // , total: 50\r\n          }}\r\n          dataSource={roles}\r\n          columns={this.columns}\r\n          loading={this.state.loading}\r\n          rowSelection={{ type: \"radio\", selectedRowKeys: [role._id],onSelect:(role)=>{\r\n            this.setState({role:role})} \r\n          }} //设置单选\r\n          onRow={(role) => {\r\n            return {\r\n              onSelect:(event) => {\r\n                this.setState({ role });\r\n              },\r\n              onClick: (event) => {\r\n                this.setState({ role });\r\n              }, // 点击行\r\n              onDoubleClick: (event) => {},\r\n              onContextMenu: (event) => {},\r\n              onMouseEnter: (event) => {}, // 鼠标移入行\r\n              onMouseLeave: (event) => {},\r\n            };\r\n          }}\r\n          bordered\r\n        />\r\n        <Modal\r\n          title=\"添加角色\"\r\n          visible={showStatus === 1}\r\n          onOk={this.addRole}\r\n          onCancel={this.handleCancel}\r\n          destroyOnClose={true}\r\n        >\r\n          <AddForm\r\n            categoryName\r\n            setInput={(input) => {\r\n              this.input = input;\r\n            }}\r\n          />\r\n        </Modal>\r\n        <Modal\r\n          title=\"设置角色权限\"\r\n          visible={showStatus === 2}\r\n          onOk={this.setRole}\r\n          onCancel={this.handleCancel}\r\n          destroyOnClose={true}\r\n        >\r\n          <SetTree role={role} ref={this.auth}/>\r\n        </Modal>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\component\\left-nav\\index.jsx",["141","142","143"],"import React, { Component } from \"react\";\r\nimport \"./index.less\";\r\nimport { Menu } from \"antd\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport logo from \"../../assets/image/logo.png\";\r\nimport menuList from \"../../config/menuConfig\";\r\nimport memoryUtils from \"../../utils/memoryUtils\";\r\n/* \r\n左侧导航的组件\r\n */\r\nconst { SubMenu } = Menu;\r\nclass LeftNav extends Component {\r\n  // state = {\r\n  //   current: \"1\",\r\n  // };\r\n  getMenuNodes_map = (menuList) => {\r\n    // map加递归\r\n    return menuList.map((item) => {\r\n      /* \r\n      title\r\n      key\r\n      icon\r\n      chilren 可能有 */\r\n      if (!item.children) {\r\n        return (\r\n          <Menu.Item key={item.key} icon={item.icon}>\r\n            <Link to={item.key}>{item.title}</Link>\r\n          </Menu.Item>\r\n        );\r\n      } else {\r\n        return (\r\n          <SubMenu key={item.key} icon={item.icon} title={item.title}>\r\n            {this.getMenuNodes(item.children)}\r\n          </SubMenu>\r\n        );\r\n      }\r\n    });\r\n  };\r\n  //查看item是否有授权\r\n  hasAuth = (item) =>{\r\n    const key = item.key\r\n    // const menus = memoryUtils.user.role.menus\r\n    // const username = memoryUtils.user.username\r\n    const menus = \"admin\"\r\n    const username = \"admin\"\r\n    // console.log(username)\r\n    /*\r\n    1.如果当前用户是admin,直接通过 \r\n    2.如果当前item是公开的\r\n    3.当前用户有此item的权限\r\n     */\r\n    if(username==='admin'||key==='./home'||menus.indexOf(key)!==-1){\r\n      return true\r\n    }else if(item.children){//有一个子item的权限,\r\n      return !!item.children.find(child =>menus.indexOf(child.key)!==-1)\r\n    }\r\n    return false\r\n  }\r\n  //改用reduce调用\r\n  getMenuNodes = (menuList) => {\r\n    const path = this.props.location.pathname;\r\n    return menuList.reduce((pre, item) => {\r\n      //查看当前用户是否有item对应的权限\r\n      if (this.hasAuth(item)) {\r\n        //像pre中添加《item》或者《submenu》\r\n        if (!item.children) {\r\n          pre.push(\r\n            <Menu.Item key={item.key} icon={item.icon}>\r\n              <Link to={item.key}>{item.title}</Link>\r\n            </Menu.Item>\r\n          );\r\n        } else {\r\n          const cItem = item.children.find(\r\n            (cItem) => 0 === path.indexOf(cItem.key)\r\n          );\r\n          //如果存在，说明当前item的子列表需要打开\r\n          if (cItem) {\r\n            this.openkey = item.key;\r\n          }\r\n\r\n          pre.push(\r\n            <SubMenu key={item.key} icon={item.icon} title={item.title}>\r\n              {this.getMenuNodes(item.children)}\r\n            </SubMenu>\r\n          );\r\n        }\r\n      }\r\n      return pre; //记住return pre\r\n    }, []);\r\n  };\r\n  handleClick = (e) => {\r\n    // console.log(\"click \", e);\r\n    this.setState({\r\n      current: e.key,\r\n    });\r\n  };\r\n  //在第一次render之前执行一次，为第一次render准备数据（必须同步）\r\n  UNSAFE_componentWillMount() {\r\n    this.menuNodes = this.getMenuNodes(menuList);\r\n  }\r\n  render() {\r\n    // console.log(this)\r\n    let path = this.props.location.pathname;\r\n    // console.log(path)\r\n    if (path.indexOf(\"/product\") === 0) {\r\n      //当前请求的是商品或其子路由界面\r\n      path = \"/product\";\r\n    }\r\n    const openkey = this.openkey;\r\n    // this.setState({current:path})\r\n    return (\r\n      <div>\r\n        <Link to=\"/\" className=\"left-nav-header\">\r\n          {/* <img src={logo} alt=\"logo\" /> */}\r\n          <h1></h1>\r\n        </Link>\r\n\r\n        {/* <br />\r\n        <br /> */}\r\n        <Menu\r\n          theme=\"dark\"\r\n          onClick={this.handleClick}\r\n          style={{ width: 200 }}\r\n          defaultOpenKeys={[openkey]}\r\n          selectedKeys={[path]}\r\n          mode=\"inline\"\r\n        >\r\n          {this.menuNodes}\r\n        </Menu>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(LeftNav);\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\component\\header\\index.jsx",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\role\\add-form.jsx",["144"],"import React, { PureComponent } from \"react\";\r\nimport { Form, Input } from \"antd\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Item = Form.Item;\r\n// const Option = Select.Option;\r\nexport default class AddForm extends PureComponent {\r\n  static propTypes = {\r\n    setInput: PropTypes.func.isRequired,\r\n  };\r\n  render() {\r\n    // const { categorys } = this.props;\r\n    const formItemLayout = {\r\n        labelCol: { span: 4 }, //左侧label宽度\r\n        wrapperCol: { span: 10 }, //右侧包裹输入框宽度\r\n      };\r\n    return (\r\n      <Form >\r\n      {/* <Form onValuesChange={this.onFinish}> */}\r\n        <Item\r\n        {...formItemLayout}\r\n          name=\"input\"\r\n          label=\"角色名称\"\r\n          name=\"username\"\r\n          rules={[{ required: true, message: \"名称必须输入!\" }]}\r\n        >\r\n          <Input\r\n         \r\n            initialvalues=\"请输入角色名称\"\r\n            ref={(input) =>{ \r\n                this.props.setInput(input)\r\n            }}\r\n          ></Input>\r\n        </Item>\r\n        {/* <Item></Item><Input></Input>\r\n                <Input></Input> */}\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\dataUtils.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\constant.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\config\\menuConfig.js",["145","146","147","148","149","150"],"import {HomeOutlined,AppstoreAddOutlined,BarsOutlined,ToolOutlined,UserOutlined,SafetyOutlined,AreaChartOutlined,BarChartOutlined,PieChartFilled,LineChartOutlined} from '@ant-design/icons';\r\n\r\nconst menuList = [\r\n  {\r\n    title: \"Home\", // 菜单标题名称\r\n    key: \"/home\", // 对应的 path\r\n    icon: <HomeOutlined/>, // 图标名称\r\n  },\r\n  {\r\n    title: \"Summary\",\r\n    key: \"/user\",\r\n    icon: <UserOutlined />,\r\n  },\r\n  {\r\n    title: \"TimeSheet\",\r\n    key: \"/product\",\r\n    icon: <AppstoreAddOutlined />,\r\n    // children: [\r\n    //   // 子菜单列表\r\n    //   {\r\n    //     title: \"品类管理\",\r\n    //     key: \"/category\",\r\n    //     icon: <BarsOutlined />,\r\n    //   },\r\n    //   {\r\n    //     title: \"商品管理\",\r\n    //     key: \"/product\",\r\n    //     icon: <ToolOutlined />,\r\n    //   },\r\n    // ],\r\n  },\r\n  \r\n  {\r\n    title: \"Profile\",\r\n    key: \"/role\",\r\n    icon: <SafetyOutlined />,\r\n  }\r\n  \r\n];\r\nexport default menuList;\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\users\\user-form.jsx",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\category\\addform.jsx",["151"],"import React, { Component } from 'react'\r\nimport {Form,Select,Input} from 'antd'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Item = Form.Item\r\nconst Option = Select.Option\r\nexport default class AddForm extends Component {\r\n    static propTypes = {\r\n        categorys:PropTypes.array.isRequired,\r\n        setClasses:PropTypes.func.isRequired,\r\n        setInput:PropTypes.func.isRequired\r\n    }\r\n    render() {\r\n        const {categorys}= this.props\r\n        return (\r\n            \r\n            <Form onValuesChange={this.onFinish}>\r\n                <Item name='classer'>\r\n                <Select initialValues='0' ref={input =>this.props.setClasses(input)}>\r\n                    <Option value='0'>一级分类</Option>\r\n                   {categorys.map(c=><Option value={c._id}>{c.name}</Option>)}\r\n                </Select>\r\n                </Item>\r\n                <Item name='input' name=\"username\"   rules={[{ required: true, message: \"名称必须输入!\" }]}>\r\n                <Input initialValues='请输入分类名称'  ref={input =>this.props.setInput(input)}></Input>\r\n                </Item>\r\n                {/* <Item></Item><Input></Input>\r\n                <Input></Input> */}\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\role\\setTree.jsx",["152"],"import React, { Component } from \"react\";\r\nimport { Tree, Input, Form } from \"antd\";\r\nimport menuConfig from \"../../config/menuConfig\";\r\nimport menuList from \"../../config/menuConfig\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default class SetTree extends Component {\r\n  static propTypes = {\r\n    role: PropTypes.object.isRequired,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const { menus } = this.props.role;\r\n    // console.log(menus)\r\n    this.state = {\r\n      checkedKeys: menus,\r\n    };\r\n    // this.setRole=setRole\r\n    // this.setState({\r\n    //     checkedKeys:menus,\r\n    // })\r\n  }\r\n  // getTreeNodes=()=>{\r\n  //     return menuList.reduce((pre,item)=>{\r\n  //         pre\r\n  //         return pre\r\n  //     },[])\r\n  // }\r\n  // UNSAFE_componentWillMount(){\r\n  //     console.log(this.props.role.menus)\r\n  //     this.setState({cheackedKeys:this.props.role.menus})\r\n  // }\r\n  /* 为父组件提交获取最新menus数据的方法 */\r\n  getMenus = () => this.state.checkedKeys;\r\n\r\n  render() {\r\n    const { role } = this.props;\r\n    const { checkedKeys } = this.state;\r\n    const treeData = menuConfig;\r\n  \r\n    const onCheck = (checkedKeys) => {\r\n      // console.log(\"onCheck\", checkedKeys);\r\n      this.setState({ checkedKeys: checkedKeys });\r\n    };\r\n    const formItemLayout = {\r\n      labelCol: { span: 4 }, //左侧label宽度\r\n      wrapperCol: { span: 10 }, //右侧包裹输入框宽度\r\n    };\r\n    // console.log(this.props);\r\n    // console.log(checkedKeys)\r\n    return (\r\n      <Form {...formItemLayout}>\r\n        <Form.Item label=\"角色名称\">\r\n          <Input value={role.name} disabled />\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Tree\r\n            checkable\r\n            //   defaultExpandedKeys={['0-0-0', '0-0-1']}\r\n            defaultExpandAll={true}\r\n            //   defaultSelectedKeys={['0-0-0', '0-0-1']}\r\n            checkedKeys={checkedKeys}\r\n            // onSelect={onSelect}\r\n            onCheck={onCheck}\r\n            treeData={treeData}\r\n          />\r\n        </Form.Item>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\category\\updateform.jsx",["153"],"import React, { Component } from 'react'\r\nimport {Form,Select,Input} from 'antd'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Item = Form.Item\r\nconst Option = Select.Option\r\nexport default class UpdateForm extends Component {\r\n    static propTypes = {\r\n        category:PropTypes.string.isRequired,\r\n        setForm:PropTypes.func.isRequired\r\n    }\r\n\r\n    render() {\r\n        const {category} = this.props\r\n        return (\r\n            <Form >\r\n                <Item   name=\"username\"   rules={[{ required: true, message: \"名称必须输入!\" }]}>\r\n                <Input     placeholder='请输入分类名称' initialValues={category}  ref={input =>this.props.setForm(input)}></Input>\r\n                </Item>\r\n                {/* <Item></Item><Input></Input>\r\n                <Input></Input> */}\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\component\\link-button\\index.jsx",[],{"ruleId":"154","replacedBy":"155"},{"ruleId":"156","replacedBy":"157"},{"ruleId":"158","severity":1,"message":"159","line":2,"column":8,"nodeType":"160","messageId":"161","endLine":2,"endColumn":12},{"ruleId":"162","severity":1,"message":"163","line":59,"column":7,"nodeType":"164","messageId":"165","endLine":59,"endColumn":13},{"ruleId":"158","severity":1,"message":"166","line":5,"column":8,"nodeType":"160","messageId":"161","endLine":5,"endColumn":19},{"ruleId":"158","severity":1,"message":"167","line":2,"column":31,"nodeType":"160","messageId":"161","endLine":2,"endColumn":36},{"ruleId":"158","severity":1,"message":"168","line":3,"column":10,"nodeType":"160","messageId":"161","endLine":3,"endColumn":19},{"ruleId":"158","severity":1,"message":"169","line":4,"column":10,"nodeType":"160","messageId":"161","endLine":4,"endColumn":21},{"ruleId":"158","severity":1,"message":"170","line":8,"column":10,"nodeType":"160","messageId":"161","endLine":8,"endColumn":20},{"ruleId":"158","severity":1,"message":"171","line":8,"column":32,"nodeType":"160","messageId":"161","endLine":8,"endColumn":50},{"ruleId":"158","severity":1,"message":"172","line":9,"column":8,"nodeType":"160","messageId":"161","endLine":9,"endColumn":16},{"ruleId":"158","severity":1,"message":"173","line":141,"column":20,"nodeType":"160","messageId":"161","endLine":141,"endColumn":30},{"ruleId":"158","severity":1,"message":"174","line":141,"column":32,"nodeType":"160","messageId":"161","endLine":141,"endColumn":37},{"ruleId":"158","severity":1,"message":"175","line":1,"column":28,"nodeType":"160","messageId":"161","endLine":1,"endColumn":36},{"ruleId":"158","severity":1,"message":"176","line":2,"column":10,"nodeType":"160","messageId":"161","endLine":2,"endColumn":17},{"ruleId":"158","severity":1,"message":"177","line":3,"column":8,"nodeType":"160","messageId":"161","endLine":3,"endColumn":13},{"ruleId":"158","severity":1,"message":"178","line":5,"column":19,"nodeType":"160","messageId":"161","endLine":5,"endColumn":29},{"ruleId":"158","severity":1,"message":"179","line":6,"column":9,"nodeType":"160","messageId":"161","endLine":6,"endColumn":16},{"ruleId":"158","severity":1,"message":"180","line":8,"column":8,"nodeType":"160","messageId":"161","endLine":8,"endColumn":18},{"ruleId":"181","severity":1,"message":"182","line":113,"column":112,"nodeType":"183","messageId":"184","endLine":113,"endColumn":114},{"ruleId":"181","severity":1,"message":"182","line":113,"column":133,"nodeType":"183","messageId":"184","endLine":113,"endColumn":135},{"ruleId":"181","severity":1,"message":"182","line":113,"column":155,"nodeType":"183","messageId":"184","endLine":113,"endColumn":157},{"ruleId":"181","severity":1,"message":"182","line":212,"column":115,"nodeType":"183","messageId":"184","endLine":212,"endColumn":117},{"ruleId":"181","severity":1,"message":"182","line":212,"column":267,"nodeType":"183","messageId":"184","endLine":212,"endColumn":269},{"ruleId":"181","severity":1,"message":"182","line":212,"column":305,"nodeType":"183","messageId":"184","endLine":212,"endColumn":307},{"ruleId":"181","severity":1,"message":"182","line":215,"column":107,"nodeType":"183","messageId":"184","endLine":215,"endColumn":109},{"ruleId":"181","severity":1,"message":"182","line":218,"column":109,"nodeType":"183","messageId":"184","endLine":218,"endColumn":111},{"ruleId":"181","severity":1,"message":"182","line":218,"column":258,"nodeType":"183","messageId":"184","endLine":218,"endColumn":260},{"ruleId":"181","severity":1,"message":"182","line":218,"column":293,"nodeType":"183","messageId":"184","endLine":218,"endColumn":295},{"ruleId":"158","severity":1,"message":"185","line":7,"column":10,"nodeType":"160","messageId":"161","endLine":7,"endColumn":13},{"ruleId":"158","severity":1,"message":"159","line":5,"column":8,"nodeType":"160","messageId":"161","endLine":5,"endColumn":12},{"ruleId":"158","severity":1,"message":"166","line":7,"column":8,"nodeType":"160","messageId":"161","endLine":7,"endColumn":19},{"ruleId":"186","severity":1,"message":"187","line":115,"column":11,"nodeType":"188","endLine":115,"endColumn":15},{"ruleId":"189","severity":1,"message":"190","line":24,"column":11,"nodeType":"191","endLine":24,"endColumn":26},{"ruleId":"158","severity":1,"message":"192","line":1,"column":42,"nodeType":"160","messageId":"161","endLine":1,"endColumn":54},{"ruleId":"158","severity":1,"message":"193","line":1,"column":55,"nodeType":"160","messageId":"161","endLine":1,"endColumn":67},{"ruleId":"158","severity":1,"message":"194","line":1,"column":96,"nodeType":"160","messageId":"161","endLine":1,"endColumn":113},{"ruleId":"158","severity":1,"message":"195","line":1,"column":114,"nodeType":"160","messageId":"161","endLine":1,"endColumn":130},{"ruleId":"158","severity":1,"message":"196","line":1,"column":131,"nodeType":"160","messageId":"161","endLine":1,"endColumn":145},{"ruleId":"158","severity":1,"message":"197","line":1,"column":146,"nodeType":"160","messageId":"161","endLine":1,"endColumn":163},{"ruleId":"189","severity":1,"message":"190","line":24,"column":36,"nodeType":"191","endLine":24,"endColumn":51},{"ruleId":"158","severity":1,"message":"198","line":4,"column":8,"nodeType":"160","messageId":"161","endLine":4,"endColumn":16},{"ruleId":"158","severity":1,"message":"199","line":6,"column":7,"nodeType":"160","messageId":"161","endLine":6,"endColumn":13},"no-native-reassign",["200"],"no-negated-in-lhs",["201"],"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ReturnStatement","expectedReturnValue","'memoryUtils' is defined but never used.","'Modal' is defined but never used.","'PAGE_SIZE' is defined but never used.","'formateDate' is defined but never used.","'reqDelUser' is defined but never used.","'reqAddOrUpdateUser' is defined but never used.","'UserForm' is defined but never used.","'showStatus' is assigned a value but never used.","'roles' is assigned a value but never used.","'useState' is defined but never used.","'connect' is defined but never used.","'axios' is defined but never used.","'reqContact' is defined but never used.","'message' is defined but never used.","'DatePicker' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'get' is defined but never used.","jsx-a11y/heading-has-content","Headings must have content and the content must be accessible by a screen reader.","JSXOpeningElement","react/jsx-no-duplicate-props","No duplicate props allowed","JSXAttribute","'BarsOutlined' is defined but never used.","'ToolOutlined' is defined but never used.","'AreaChartOutlined' is defined but never used.","'BarChartOutlined' is defined but never used.","'PieChartFilled' is defined but never used.","'LineChartOutlined' is defined but never used.","'menuList' is defined but never used.","'Option' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]