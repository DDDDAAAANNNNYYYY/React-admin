[{"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\index.js":"1","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\App.js":"2","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\serviceWorker.js":"3","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\memoryUtils.js":"4","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\storageUtils.js":"5","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\login\\index.jsx":"6","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\admin\\index.jsx":"7","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\api\\index.js":"8","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\api\\ajax.jsx":"9","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\home\\index.jsx":"10","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\users\\index.jsx":"11","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\category\\index.jsx":"12","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\product\\index.jsx":"13","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\role\\index.jsx":"14","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\component\\left-nav\\index.jsx":"15","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\component\\header\\index.jsx":"16","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\role\\add-form.jsx":"17","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\dataUtils.js":"18","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\constant.js":"19","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\config\\menuConfig.js":"20","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\users\\user-form.jsx":"21","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\category\\addform.jsx":"22","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\role\\setTree.jsx":"23","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\category\\updateform.jsx":"24","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\component\\link-button\\index.jsx":"25"},{"size":649,"mtime":1618509129757,"results":"26","hashOfConfig":"27"},{"size":655,"mtime":1618509129725,"results":"28","hashOfConfig":"27"},{"size":5086,"mtime":1618509129784,"results":"29","hashOfConfig":"27"},{"size":144,"mtime":1618509129789,"results":"30","hashOfConfig":"27"},{"size":763,"mtime":1618533244000,"results":"31","hashOfConfig":"27"},{"size":4717,"mtime":1618533764724,"results":"32","hashOfConfig":"27"},{"size":1830,"mtime":1618533243984,"results":"33","hashOfConfig":"27"},{"size":3932,"mtime":1618538278694,"results":"34","hashOfConfig":"27"},{"size":1243,"mtime":1618533221712,"results":"35","hashOfConfig":"27"},{"size":266,"mtime":1618509129765,"results":"36","hashOfConfig":"27"},{"size":6079,"mtime":1618586288201,"results":"37","hashOfConfig":"27"},{"size":7016,"mtime":1618509129763,"results":"38","hashOfConfig":"27"},{"size":16184,"mtime":1618558443029,"results":"39","hashOfConfig":"27"},{"size":10723,"mtime":1618533529034,"results":"40","hashOfConfig":"27"},{"size":3869,"mtime":1618509129748,"results":"41","hashOfConfig":"27"},{"size":2775,"mtime":1618509129745,"results":"42","hashOfConfig":"27"},{"size":1132,"mtime":1618509129777,"results":"43","hashOfConfig":"27"},{"size":254,"mtime":1618509129788,"results":"44","hashOfConfig":"27"},{"size":139,"mtime":1618509129787,"results":"45","hashOfConfig":"27"},{"size":955,"mtime":1618509129755,"results":"46","hashOfConfig":"27"},{"size":2683,"mtime":1618509129782,"results":"47","hashOfConfig":"27"},{"size":1235,"mtime":1618509129761,"results":"48","hashOfConfig":"27"},{"size":2080,"mtime":1618509129780,"results":"49","hashOfConfig":"27"},{"size":844,"mtime":1618509129763,"results":"50","hashOfConfig":"27"},{"size":244,"mtime":1618509129753,"results":"51","hashOfConfig":"27"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},"sjd8wv",{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65","usedDeprecatedRules":"54"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68","usedDeprecatedRules":"54"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":24,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81","usedDeprecatedRules":"54"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"84","usedDeprecatedRules":"54"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"87","usedDeprecatedRules":"54"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"92","usedDeprecatedRules":"54"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"99","usedDeprecatedRules":"54"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"104","usedDeprecatedRules":"54"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"107","usedDeprecatedRules":"54"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"110","usedDeprecatedRules":"54"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\index.js",[],["113","114"],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\App.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\serviceWorker.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\memoryUtils.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\storageUtils.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\login\\index.jsx",["115","116","117"],"import React, { Component } from \"react\";\r\nimport logo from \"../../assets/image/logo.png\";\r\nimport { Form, Input, Button, message } from \"antd\";\r\nimport { UserOutlined, LockOutlined } from \"@ant-design/icons\";\r\nimport {Redirect} from 'react-router-dom'\r\nimport \"./index.less\";\r\nimport { reqCheckLogin, reqLogin } from \"../../api/index.js\";\r\nimport memoryUtils from \"../../utils/memoryUtils\";\r\nimport storageUtils from \"../../utils/storageUtils\";\r\n\r\n\r\nexport default class Login extends Component {\r\n  onFinish = async (values) => {\r\n  \r\n    const { username, password } = values;\r\n    console.log(\"username=>\" + username)\r\n    console.log(\"password=>\" + password)\r\n    console.log(values)\r\n    try {\r\n      const response = await reqLogin(username, password);\r\n      \r\n      console.log(\"请求成功\", response);\r\n\r\n      const token = response; //{state:0,data:user} {state:1,msg:'xxxx'}\r\n      localStorage.setItem(\"token\", token);\r\n      const verifyResponse = await reqCheckLogin(token)\r\n    \r\n      const result = verifyResponse;\r\n\r\n      console.log(result)\r\n\r\n      if (result.name === \"tester1\") {\r\n\r\n      console.log(localStorage.getItem(\"token\"));\r\n   \r\n   \r\n      if (token == localStorage.getItem(\"token\")) {\r\n\r\n        \r\n        message.success(\"login sucessful\");\r\n        const user=result\r\n        \r\n        memoryUtils.user = user;\r\n        storageUtils.saveUser(user);\r\n        // console.log(this);\r\n        this.props.history.push(\"/\");\r\n      } else {\r\n        // \r\n        message.error(\"wrong username/password\");\r\n      }\r\n    } \r\n  }\r\n    catch (error) {\r\n      //console.log(\"\", error);\r\n    }\r\n  };\r\n  onFinishFailed = (values, errorFields, outOfDate) => {\r\n    //console.log(\"校验失败\");\r\n    values.errorFields.map((x) => {\r\n      return //console.log(x.errors);\r\n    });\r\n    // //console.log('value------',values) \r\n  };\r\n  validatePwd = (rule, value, callback) => {\r\n    // //console.log(value)\r\n    if (!value) {\r\n      callback(\"please input password\");\r\n    } else if (value.length < 4) {\r\n      callback(\"the length of password must be larger than 4\");\r\n    } else if (value.length > 12) {\r\n      callback(\"the length of password must be smaller than 12\");\r\n    } else {\r\n      callback(); //验证通过\r\n    }\r\n  };\r\n  render() {\r\n    //\r\n    const user = memoryUtils.user;\r\n    if (user&&user._id) {\r\n      \r\n      \r\n      return <Redirect to=\"/user\" />;\r\n    }\r\n    return (\r\n      <div className=\"login\">\r\n        <header className=\"login-header\">\r\n         \r\n          <h1>Smart.TimeSheet</h1>\r\n        </header>\r\n        <section className=\"login-content\">\r\n          <h2>User Login</h2>\r\n\r\n          <Form\r\n            name=\"normal_login\"\r\n            className=\"login-form\"\r\n            initialValues={{\r\n              remember: true,\r\n            }}\r\n            onFinish={this.onFinish}\r\n            onFinishFailed={this.onFinishFailed}\r\n          >\r\n            <Form.Item\r\n              name=\"username\"\r\n              initialValue=\"admin\"\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: \"Please enter your usrname!\",\r\n                },\r\n                {\r\n                  min: 3,\r\n                  message: \"min length is 3\",\r\n                },\r\n                {\r\n                  max: 15,\r\n                  message: \"max length is 15\",\r\n                },\r\n                {\r\n                  pattern: /^[a-zA-Z0-9_]+$/,\r\n                  message: \"must be letters or number\",\r\n                },\r\n              ]}\r\n            >\r\n              <Input\r\n                prefix={<UserOutlined className=\"site-form-item-icon\" />}\r\n                placeholder=\"username\"\r\n              />\r\n            </Form.Item>\r\n            <Form.Item\r\n              name=\"password\"\r\n              initialValue=\"admin\"\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: \"please input password!\",\r\n                },\r\n                {\r\n                  validator: this.validatePwd,\r\n                },\r\n              ]}\r\n            >\r\n              <Input\r\n                prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n                type=\"password\"\r\n                placeholder=\"password\"\r\n              />\r\n            </Form.Item>\r\n          \r\n\r\n            <Form.Item>\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                className=\"login-form-button\" \r\n                style={{width:\"100%\" }}             \r\n              >\r\n                Login\r\n              </Button>\r\n           \r\n            </Form.Item>\r\n          </Form>\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\admin\\index.jsx",["118"],"import React, { Component } from \"react\";\r\nimport { Redirect, Switch, Route } from \"react-router-dom\";\r\nimport { Layout } from \"antd\";\r\n\r\nimport memoryUtils from \"../../utils/memoryUtils\";\r\nimport LeftNav from \"../../component/left-nav\";\r\nimport Header from \"../../component/header\";\r\nimport Home from \"../home\";\r\nimport Category from \"../category\";\r\nimport Role from \"../role\";\r\n\r\nimport Users from \"../users\";\r\nimport Product from \"../product\";\r\nconst { Footer, Sider, Content } = Layout;\r\n\r\nexport default class Admin extends Component {\r\n  render() {\r\n    const user = localStorage.getItem(\"user_key\");\r\n    // 如果内存中没有存储user ==>当前没登陆\r\n    if (!user ) {\r\n    \r\n      //自动跳转到登陆\r\n      return <Redirect to=\"/login\" />;\r\n    }\r\n    return (\r\n      <>\r\n        <Layout style={{ height: \"100%\", width: \"100%\" }}>\r\n          <Sider style={{\r\n        overflow: 'auto',\r\n        height: '100vh',\r\n        position: 'fixed',\r\n        left: 0,\r\n      }}>\r\n        {/* 设置固定侧边栏 */}\r\n            <LeftNav />\r\n          </Sider>\r\n          <Layout style={{ marginLeft: 200 }}>\r\n            <Header>Header</Header>\r\n            <Content style={{ margin:20,backgroundColor: \"white\"}}>\r\n              <Switch>\r\n                <Route path=\"/home\" component={Home} />\r\n                <Route path=\"/category\" component={Category} />\r\n                <Route path=\"/product\" component={Product} />\r\n                <Route path=\"/role\" component={Role} />\r\n                <Route path=\"/user\" component={Users} />\r\n               \r\n                <Redirect to=\"/user\" />\r\n              </Switch>\r\n            </Content>\r\n            <Footer style={{ textAlign: \"center\" }}>\r\n              \r\n            </Footer>\r\n          </Layout>\r\n        </Layout>\r\n        \r\n      </>\r\n    );\r\n  }\r\n}\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\api\\index.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\api\\ajax.jsx",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\home\\index.jsx",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\users\\index.jsx",["119","120","121","122","123","124","125","126"],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\category\\index.jsx",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\product\\index.jsx",["127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150"],"import React, { Component, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport axios from 'axios';\r\nimport memoryUtils from \"../../utils/memoryUtils\";\r\nimport {reqContact,reqUsers} from \"../../api\";\r\nimport {message} from \"antd\";\r\nimport storageUtils from \"../../utils/storageUtils\";\r\n// import DatePicker from 'react-datepicker';\r\nimport {AiFillInfoCircle} from 'react-icons/ai';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\nconst days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\nconst times = Array.from({length: 48}, (x, i) => (i + 1) / 2);\r\n\r\nexport default class Product extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            currentIdx: 0,\r\n            users: [],\r\n            mylist: [],\r\n            timeSheetUnit: {\r\n                timeSheetUnitID: \"60786fbf38b6925c604ebfe0\",\r\n                username: \"user2\",\r\n                submissionStatus: \"Not Started\",\r\n                approvalStatus: \"N/A\",\r\n                comments: \"\",\r\n                weekEnd: '2021-04-17',\r\n                week: [\r\n                    {\r\n                        date: '2021-04-11',\r\n                        startTime: -1,\r\n                        endTime: -1,\r\n                        // totalHours: 0,\r\n                        floatingDay: false,\r\n                        holiday: false,\r\n                        vacation: false,\r\n                    },\r\n                    {\r\n                        date: '2021-04-12',\r\n                        startTime: -1,\r\n                        endTime: -1,\r\n                        // totalHours: 0,\r\n                        floatingDay: false,\r\n                        holiday: true,\r\n                        vacation: false,\r\n                    },\r\n                    {\r\n                        date: '2021-04-13',\r\n                        startTime: -1,\r\n                        endTime: -1,\r\n                        // totalHours: 0,\r\n                        floatingDay: true,\r\n                        holiday: false,\r\n                        vacation: false,\r\n                    },\r\n                    {\r\n                        date: '2021-04-14',\r\n                        startTime: 9,\r\n                        endTime: 18,\r\n                        // totalHours: 0,\r\n                        floatingDay: false,\r\n                        holiday: false,\r\n                        vacation: false,\r\n                    },\r\n                    {\r\n                        date: '2021-04-15',\r\n                        startTime: 9,\r\n                        endTime: 18,\r\n                        // totalHours: 0,\r\n                        floatingDay: false,\r\n                        holiday: false,\r\n                        vacation: false,\r\n                    },\r\n                    {\r\n                        date: '2021-04-16',\r\n                        startTime: 9,\r\n                        endTime: 18,\r\n                        // totalHours: 0,\r\n                        floatingDay: false,\r\n                        holiday: false,\r\n                        vacation: false,\r\n                    },\r\n                    {\r\n                        date: '2021-04-17',\r\n                        startTime: -1,\r\n                        endTime: -1,\r\n                        // totalHours: 0,\r\n                        floatingDay: false,\r\n                        holiday: false,\r\n                        vacation: false,\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    componentDidMount() {\r\n        // this.getUsers().then((res)=>{\r\n        //\r\n        // });\r\n        this.saveUsers();\r\n    }\r\n\r\n    \r\n    getTotalBillingHours() {\r\n        let res = 0;\r\n        this.state.timeSheetUnit.week.forEach(d => {res += d.endTime - d.startTime;});\r\n        return res;\r\n    }\r\n\r\n    getTotalCompensatedHours() {\r\n        let res = 0;\r\n        this.state.timeSheetUnit.week.forEach((d, index) => {res += (d.endTime - d.startTime + ((d.floatingDay == true || d.holiday == true || d.vacation == true)? 8 : 0));});\r\n        return res;\r\n    }\r\n\r\n    setDefault = async() => {\r\n        let newUser = null;\r\n        axios.get(\"/api/user/getUser/\" + this.state.username).then(res=>{\r\n            newUser = res.data;\r\n            let temp = this.state.timeSheetUnit.week;\r\n            let template = [\r\n                {startTime: temp[0].startTime + '', endTime: temp[0].endTime + '', vacation: temp[0].vacation + '', floatingDay: temp[0].floatingDay + ''},\r\n                {startTime: temp[1].startTime + '', endTime: temp[1].endTime + '', vacation: temp[1].vacation + '', floatingDay: temp[1].floatingDay + ''},\r\n                {startTime: temp[2].startTime + '', endTime: temp[2].endTime + '', vacation: temp[2].vacation + '', floatingDay: temp[2].floatingDay + ''},\r\n                {startTime: temp[3].startTime + '', endTime: temp[3].endTime + '', vacation: temp[3].vacation + '', floatingDay: temp[3].floatingDay + ''},\r\n                {startTime: temp[4].startTime + '', endTime: temp[4].endTime + '', vacation: temp[4].vacation + '', floatingDay: temp[4].floatingDay + ''},\r\n                {startTime: temp[5].startTime + '', endTime: temp[5].endTime + '', vacation: temp[5].vacation + '', floatingDay: temp[5].floatingDay + ''},\r\n                {startTime: temp[6].startTime + '', endTime: temp[6].endTime + '', vacation: temp[6].vacation + '', floatingDay: temp[6].floatingDay + ''}\r\n            ]\r\n            newUser.template = template;\r\n            axios.post(\"/api/user/addUser\", newUser).then(res => {\r\n                alert(\"Template Saved!\");\r\n            });\r\n        });\r\n    }\r\n\r\n    onFileChangeHandler = (e) => {\r\n        e.preventDefault();\r\n        const username = this.state.username;\r\n        const formData = new FormData();\r\n        formData.append('file', e.target.files[0]);\r\n        axios.post(\"/api/user/upload/\" + username, formData)\r\n            .then(res => {\r\n                alert(\"File uploaded successfully.\")\r\n            })\r\n    };\r\n\r\n    getFloatingDayComment() {\r\n        let cnt = 0;\r\n        this.state.timeSheetUnit.week.forEach((d, index) =>{cnt += (d.floatingDay == true? 1 : 0)});\r\n        return (cnt == 0? \"\" : (cnt + \" floating day(s) required;\"));\r\n    }\r\n\r\n    getVacationComment() {\r\n        let cnt = 0;\r\n        this.state.timeSheetUnit.week.forEach((d, index) =>{cnt += (d.vacation == true? 1 : 0)});\r\n        return (cnt == 0? \"\" : (cnt + \" vacation day(s) required;\"));\r\n    }\r\n\r\n    updateStatus = async () => {   \r\n        // this.state;\r\n\r\n        let st = Object.assign({}, this.state.timeSheetUnit);\r\n        if (st.approvalStatus == 'approved') {\r\n            st.submissionStatus = 'complete';\r\n        }\r\n        else {\r\n            st.submissionStatus = 'incomplete';\r\n        }\r\n        st.comments = this.getFloatingDayComment() + this.getVacationComment();\r\n        const username = memoryUtils.user.name\r\n        console.log(this.state.timeSheetUnit.weekEnd);\r\n        axios.post(\"api/user/saveUser\", st).then( res=>{\r\n          alert(\"Updated successfully\");\r\n        })\r\n    \r\n    };\r\n\r\n    saveUsers = async () => {\r\n        // console.log(this.state.timeSheetUnit.week[0].date);\r\n        const mylista = storageUtils.getList();\r\n        const index = storageUtils.getIndex();\r\n        this.setState({currentIdx: index});\r\n        const name = memoryUtils.user.name;\r\n        const result = await reqUsers(name);\r\n        this.setState({mylist: mylista[index]});\r\n        this.setState({timeSheetUnit: this.loadTimeSheetUnit(mylista[index])});\r\n        //this.setState({mylist: mylista[index].week});\r\n        const  users  = result;\r\n        console.log(\"result\", result);\r\n        console.log(\"mylist\", this.state.mylist);\r\n        // console.log(\"timeSheetUnit\", this.state.timeSheetUnit);\r\n        this.setState({users: users});\r\n        storageUtils.saveIndex(0);\r\n    };\r\n\r\n    loadTimeSheetUnit(mylist) {\r\n        let timeSheetUnit = Object.assign({}, mylist);\r\n        let week = [];\r\n        timeSheetUnit.week.forEach((d, index) => {\r\n            week.push({\r\n                date: d.date,\r\n                startTime: parseFloat(d.startTime),\r\n                endTime: parseFloat(d.endTime),\r\n                floatingDay: d.floatingDay === 'true',\r\n                holiday: d.holiday === 'true',\r\n                vacation: d.vacation === 'true'\r\n            });\r\n        });\r\n        timeSheetUnit.week = week;\r\n        return timeSheetUnit;\r\n    }\r\n\r\n    chooseDate(event) {\r\n        let chosenDate = Date.parse(event.target.value);\r\n        let idxDiff = Math.ceil((chosenDate - Date.parse(this.state.timeSheetUnit.week[6].date))/(7 * 24 * 60 * 60 * 1000));\r\n        let nextIdx = this.state.currentIdx - idxDiff;\r\n        if (nextIdx < 0 || nextIdx >= storageUtils.getList().length) {\r\n            alert(\"Invalid date\");\r\n        }\r\n        else {\r\n            storageUtils.saveIndex(nextIdx);\r\n            this.saveUsers();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <div>\r\n                        <br/>\r\n                        Week Ending <input type = 'date' value = {this.state.timeSheetUnit.week[6].date} onChange = {(e) =>{console.log(\"eeeee\", e.target.value); this.chooseDate(e);}}></input>\r\n                        Total Billing Hours <input type = 'text' value={this.getTotalBillingHours()} disabled></input>\r\n                        Total Compensated Hours <input type = 'text' value={this.getTotalCompensatedHours()} disabled></input>\r\n                    </div>\r\n                </div>\r\n                <table style={{border:\"2px solid black\", width:\"100%\"}}>\r\n                    <tbody>\r\n                    <tr>\r\n                        <th>Day</th>\r\n                        <th>Date</th>\r\n                        <th>Starting Time</th>\r\n                        <th>Ending Time</th>\r\n                        <th>Total Hours</th>\r\n                        <th>Floating Day</th>\r\n                        <th>Holiday</th>\r\n                        <th>Vacation</th>\r\n                    </tr>\r\n                    {this.state.timeSheetUnit.week.map(({date, startTime, endTime, floatingDay, holiday, vacation}, index) =>\r\n                        <tr key = {index}>\r\n                            <td>{days[index]}</td>\r\n                            <td>{date.toString()}</td>\r\n                            <td>\r\n                                <select disabled={this.state.timeSheetUnit.submissionStatus == 'complete'} value={this.state.timeSheetUnit.week[index].startTime} onChange={(e) => this.setState(prevState => {let tsu = Object.assign({},prevState); tsu.timeSheetUnit.week[index].startTime = e.target.value; if (e.target.value === -1) {tsu.timeSheetUnit.week[index].endTime = -1;}; return tsu;})}>\r\n                                    <option value={-1} selected = {startTime === -1}>N/A</option>\r\n                                    {\r\n                                        times.map((time, index) =>\r\n                                            <option value = {time} key = {index} selected={time === startTime}>\r\n                                                {Math.floor(time >= 13? (time - 12) : time) + ':' + (time === Math.floor(time)? '00' : '30') + ' ' + (time % 24 >= 12? 'pm' : 'am')}\r\n                                            </option>)\r\n                                    }\r\n                                </select>\r\n                            </td>\r\n                            <td>\r\n                                <select disabled={this.state.timeSheetUnit.submissionStatus == 'complete'} value={this.state.timeSheetUnit.week[index].endTime} onChange={(e) => this.setState(prevState => {let tsu = Object.assign({},prevState); tsu.timeSheetUnit.week[index].endTime = e.target.value; if (e.target.value === -1) {tsu.timeSheetUnit.week[index].startTime = -1;}; return tsu;})}>\r\n                                    <option value={-1} selected = {startTime === -1}>N/A</option>\r\n                                    {\r\n                                        times.map((time, index) =>\r\n                                            <option value = {time} key = {index} selected={time === endTime}>\r\n                                                {Math.floor(time >= 13? (time - 12) : time) + ':' + (time === Math.floor(time)? '00' : '30') + ' ' + (time % 24 >= 12? 'pm' : 'am')}\r\n                                            </option>)\r\n                                    }\r\n                                </select>\r\n                            </td>\r\n                            <td>{startTime === -1 || endTime === -1? 0 : (endTime - startTime)}</td>\r\n                            <td>\r\n                                <input type = 'radio' name = {index} value = 'floatingDay' checked = {floatingDay == true} disabled={this.state.timeSheetUnit.submissionStatus === 'complete' || this.state.timeSheetUnit.week[index].holiday == true} onChange={(e) => this.setState(prevState => {let st = Object.assign({}, prevState); st.timeSheetUnit.week[index].floatingDay = (e.target.value === 'floatingDay'); if (e.target.value === 'floatingDay'){st.timeSheetUnit.week[index].startTime = -1;st.timeSheetUnit.week[index].endTime =-1;}; return st;})}></input>\r\n                            </td>\r\n                            <td>\r\n                                <input type = 'radio' name = {index} value = 'holiday' checked = {holiday == true} disabled={true}></input>\r\n                            </td>\r\n                            <td>\r\n                                <input type = 'radio' name = {index} value = 'vacation' checked = {vacation == true} disabled={this.state.timeSheetUnit.submissionStatus === 'complete' || this.state.timeSheetUnit.week[index].holiday == true} onChange={(e) => this.setState(prevState => {let st = Object.assign({}, prevState); st.timeSheetUnit.week[index].vacation = (e.target.value === 'vacation'); if (e.target.value === 'vacation'){st.timeSheetUnit.week[index].startTime = -1;st.timeSheetUnit.week[index].endTime =-1;}; return st;})}></input>\r\n                            </td>\r\n                        </tr>\r\n                    )}\r\n                    </tbody>\r\n                </table>\r\n                <button onClick={this.setDefault} disabled={this.state.timeSheetUnit.submissionStatus == 'complete'}>Set Default <AiFillInfoCircle data-tip='Save daily hours as default; future weekly timesheet will show same hours.'></AiFillInfoCircle></button><ReactTooltip />\r\n                <div>\r\n                    <select disabled={this.state.timeSheetUnit.submissionStatus == 'complete'} value={this.state.timeSheetUnit.approvalStatus} onChange={(e) => this.setState(prevState => {let st = Object.assign({}, prevState); st.timeSheetUnit.approvalStatus = e.target.value; console.log(this.state);return st;})}>\r\n                        <option value = 'approved'>Approved Timesheet</option>\r\n                        <option value = 'not approved'>Unapproved Timesheet</option>\r\n                    </select>\r\n                    <input type = 'file' onChange={(e)=>{this.onFileChangeHandler(e)}} disabled={this.state.timeSheetUnit.submissionStatus == 'complete'}></input>\r\n                </div>\r\n                <button onClick={this.updateStatus} disabled={this.state.timeSheetUnit.submissionStatus == 'complete'}>Save</button>\r\n            </div>\r\n            // <div>\r\n            //     a:\r\n            //     {this.state.mylist.map((x, i)=>{\r\n            //         return <div key={i} className=\"box\">\r\n            //             <div className=\"name\">\r\n            //                 <span>Date: {x.date} </span>\r\n            //                 <span></span>\r\n            //                 <span>starttime: {x.startTime}</span>\r\n            //                 <span>                  </span>\r\n            //                 <span>endtime: {x.endTime}</span>\r\n            //             </div>\r\n            //             <div className=\"name\"> </div>\r\n            //         </div>\r\n            //     })}\r\n            // </div>\r\n        );\r\n    }\r\n\r\n\r\n}\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\role\\index.jsx",["151","152","153","154","155","156","157","158","159","160","161","162","163","164","165"],"import React, { Component, } from \"react\";\r\n// import { Card, Button, Table, Modal, message } from \"antd\";\r\nimport { PAGE_SIZE } from \"../../utils/constant\";\r\nimport { reqUserInfo} from \"../../api\";\r\nimport AddForm from \"./add-form.jsx\";\r\nimport SetTree from \"./setTree\";\r\nimport { get } from \"store\";\r\nimport memoryUtils from '../../utils/memoryUtils'\r\nimport {formateDate} from '../../utils/dataUtils'\r\nimport storageUtils from \"../../utils/storageUtils\";\r\nimport ReactDOM from 'react-dom';\r\nimport 'antd/dist/antd.css';\r\n\r\nimport { Form, Input, InputNumber, Button } from 'antd';\r\nimport axios from \"axios\";\r\n\r\n/* 角色路由 */\r\n// export default class Role extends Component {\r\n//   state = {\r\n//     loading: false,\r\n//     roles: [],\r\n//     role: {},\r\n//     showStatus: 0,\r\n//   };\r\n//   constructor(props){\r\n//       super(props)\r\n//       this.auth= React.createRef()\r\n//   }\r\n//   getRoles = async () => {\r\n//     const result = await reqRoleList();\r\n//     if (result.status === 0) {\r\n//       const roles = result.data;\r\n//       this.setState({\r\n//         roles,\r\n//       });\r\n//     }\r\n//   };\r\n//   initColumn = () => {\r\n//     this.columns = [\r\n//       {\r\n//         title: \"角色名称\",\r\n//         dataIndex: \"name\",\r\n//       },\r\n//       {\r\n//         title: \"创建时间\",\r\n//         dataIndex: \"create_time\",\r\n//         render:(create_time)=>formateDate(create_time)\r\n//       },\r\n//       {\r\n//         title: \"授权时间\",\r\n//         dataIndex: \"auth_time\",\r\n//         render:(auth_time)=>formateDate(auth_time)\r\n//       },\r\n//       {\r\n//         title: \"授权人\",\r\n//         dataIndex: \"auth_name\",\r\n//       },\r\n//     ];\r\n//   };\r\n//   handleCancel = () => {\r\n//     this.setState({ showStatus: 0 });\r\n//   };\r\n//   addRole = async () => {\r\n//     const result = await reqAddRole(this.input.props.value);\r\n//     if (result.status === 0) {\r\n//       message.success(\"添加角色成功\");\r\n//       // this.getRoles()\r\n//       // 可以不请求直接添加到roles列表\r\n//       const role = result.data;\r\n//       // const roles =[...this.state.roles]\r\n//       // roles.push(role)\r\n//       // this.setState({roles:roles})\r\n//       this.setState((state) => ({\r\n//         roles: [...state.roles, role],\r\n//       }));\r\n//     } else {\r\n//       message.error(\"添加角色失败\");\r\n//     }\r\n//     this.setState({ showStatus: 0 });\r\n//   };\r\n//   setRole = async() => {\r\n//     //   console.log('select',select)\r\n//      const menus =  this.auth.current.getMenus()\r\n//      const role = this.state.role\r\n//      role.menus=menus\r\n//      role.auth_time = Date.now()\r\n//      role.auth_name = memoryUtils.user.username\r\n//     //  console.log(role)\r\n//      const result = await reqUpdateRole(role)\r\n//      if(result.status===0){\r\n//          message.success('设置权限成功')\r\n//          //如果更新的是自己角色权限,强制退出\r\n//         if(memoryUtils.user.username!=='admin'&&role._id===memoryUtils.user.role_id){\r\n//           memoryUtils.user={}\r\n//           storageUtils.deleteUser()\r\n//           this.props.history.replace('./login')\r\n//           message.info('权限已更改,请重新登录')\r\n//         }\r\n//      }else{\r\n//          message.error('设置权限失败')\r\n//      }\r\n//     this.setState({ showStatus: 0 });\r\n//   };\r\n//   componentDidMount() {\r\n//     this.getRoles();\r\n//   }\r\n//   UNSAFE_componentWillMount() {\r\n//     this.initColumn();\r\n//   }\r\n//   render() {\r\n//     const { roles, role, showStatus } = this.state;\r\n//     // const {username, totalHours, comments, approvalStatus,submissionStatus}=this.props.location.state.user\r\n//     const title = (\r\n//       <span>\r\n//         <Button type=\"primary\" onClick={() => this.setState({ showStatus: 1 })}>\r\n//           创建角色\r\n//         </Button>\r\n//         <Button\r\n//           type=\"primary\"\r\n//           onClick={() => this.setState({ showStatus: 2 })}\r\n//           disabled={!role._id}\r\n//         >\r\n//           设置角色权限\r\n//         </Button>\r\n//       </span>\r\n//     );\r\n\r\n//     // console.log(roles)\r\n//     // console.log(this.columns)\r\n//     return (\r\n//       <Card title={title}>\r\n//         <Table\r\n//           rowKey=\"_id\"\r\n//           pagination={{\r\n//             pageSize: PAGE_SIZE,\r\n//             // , total: 50\r\n//           }}\r\n//           dataSource={roles}\r\n//           columns={this.columns}\r\n//           loading={this.state.loading}\r\n//           rowSelection={{ type: \"radio\", selectedRowKeys: [role._id],onSelect:(role)=>{\r\n//             this.setState({role:role})} \r\n//           }} //设置单选\r\n//           onRow={(role) => {\r\n//             return {\r\n//               onSelect:(event) => {\r\n//                 this.setState({ role });\r\n//               },\r\n//               onClick: (event) => {\r\n//                 this.setState({ role });\r\n//               }, // 点击行\r\n//               onDoubleClick: (event) => {},\r\n//               onContextMenu: (event) => {},\r\n//               onMouseEnter: (event) => {}, // 鼠标移入行\r\n//               onMouseLeave: (event) => {},\r\n//             };\r\n//           }}\r\n//           bordered\r\n//         />\r\n//         <Modal\r\n//           title=\"添加角色\"\r\n//           visible={showStatus === 1}\r\n//           onOk={this.addRole}\r\n//           onCancel={this.handleCancel}\r\n//           destroyOnClose={true}\r\n//         >\r\n//           <AddForm\r\n//             categoryName\r\n//             setInput={(input) => {\r\n//               this.input = input;\r\n//             }}\r\n//           />\r\n//         </Modal>\r\n//         <Modal\r\n//           title=\"设置角色权限\"\r\n//           visible={showStatus === 2}\r\n//           onOk={this.setRole}\r\n//           onCancel={this.handleCancel}\r\n//           destroyOnClose={true}\r\n//         >\r\n//           <SetTree role={role} ref={this.auth}/>\r\n//         </Modal>\r\n//       </Card>\r\n//     );\r\n//   }\r\n// }\r\nexport default class Role extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userInfo:{},\r\n      \r\n    }\r\n    // this.buttonClick = this.buttonClick.bind(this)\r\n    this.getUserInfo();\r\n\r\n  }\r\n\r\n  UNSAFE_componentWillMount() {\r\n    this.getUserInfo();\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    // this.getUserInfo();\r\n  }\r\n  getUserInfo = async () => {\r\n    const name = memoryUtils.user.name;\r\n    const result = await reqUserInfo(name);\r\n    console.log(\"result=>\",result);\r\n    this.setState({userInfo: result});\r\n    console.log(\"this.state.userinfo=>\", this.state.userInfo);\r\n  }\r\n\r\n  onFinish = async (values) => {\r\n    //console.log(\"Received values of form: \", values);\r\n    //\r\n    // console.log('this----',this)\r\n    const { username, password } = values;\r\n    \r\n    try {\r\n      \r\n\r\n   \r\n\r\n      \r\n    } catch (error) {\r\n   \r\n    }\r\n  };\r\n\r\n\r\n\r\n  saveUsers = async () => {   \r\n    // this.state;\r\n    console.log(this.state);\r\n    const myUserInfo = this.state;\r\n    const username = memoryUtils.user.name\r\n    \r\n    axios.post(\"api/user/userInfo?username=\" + username, myUserInfo).then( res=>{\r\n      alert(\"Updated successfully\");\r\n    })\r\n\r\n  };\r\n\r\n  handleChangeName = (event)=>{\r\n  \r\n    this.setState(prevState =>(\r\n      {\r\n        ...prevState,\r\n        phone: event.target.value\r\n      }\r\n    ))\r\n    // alert(event.target.value\r\n    this.prevState=this.state;\r\n    console.log(this.state)\r\n  }\r\n\r\n  handleChangeEmail = (event)=>{\r\n  \r\n    this.setState(prevState =>(\r\n      {\r\n        ...prevState,\r\n        email: event.target.value\r\n      }\r\n    ))\r\n    this.prevState=this.state;\r\n    // alert(event.target.value)\r\n    console.log(this.state)\r\n  }\r\n  handleChangeAddress = (event)=>{\r\n  \r\n    this.setState(prevState =>(\r\n      {\r\n        ...prevState,\r\n        address: event.target.value\r\n        \r\n      }\r\n      \r\n    ))\r\n    this.prevState=this.state;\r\n    // alert(event.target.value)\r\n    console.log(this.state)\r\n  }\r\n  handleSubmit= (event)=>{\r\n   \r\n    event.preventDefault();\r\n}\r\n  \r\n\r\n  \r\n\r\n  render() {\r\n    const contact = this.state.userInfo.emergencyContact\r\n    \r\n    // this.props.form.setFieldsValue({ name:\"张三\", });\r\n    return (\r\n      \r\n    <form onSubmit={this.handleSubmit}>\r\n      <div>\r\n        \r\n        <div>\r\n          <h3>Contact</h3>\r\n\r\n\r\n         <label>\r\n          <input type = 'text' placeholder='phone' defaultValue = {this.state.userInfo.phone} onChange={this.handleChangeName}/><br/>\r\n          </label>\r\n          <input type = 'text' placeholder='email' defaultValue = {this.state.userInfo.email} onChange={this.handleChangeEmail}/><br/>\r\n          <input type = 'text' placeholder='address' defaultValue = {this.state.userInfo.address} onChange={this.handleChangeAddress}/><br/>\r\n        </div>\r\n        <div>\r\n          {this.state.userInfo.emergencyContact && this.state.userInfo.emergencyContact.map((contact, index) =>\r\n          <div>\r\n            <h3>Emergency Contact {index + 1}</h3>\r\n            {/* <input type = 'text' placeholder='First Name, Last Name' defaultValue = {contact.name} onChange={(e) => {this.setState(prevState => {let s = Object.assign({}, prevState); s.emergencyContact[index].name = e.target.value; return {s};})}}/><br/> */}\r\n            <input type = 'text' placeholder='First Name, Last Name' defaultValue = {contact.name} /><br/>\r\n\r\n            {/* <input type = 'text' placeholder='phone' defaultValue = {contact.phone} onChange={(e) => {this.setState(prevState => {let s = Object.assign({}, prevState); s.emergencyContact[index].phone = e.target.value; return {s};})}}/><br/> */}\r\n            <input type = 'text' placeholder='phone' defaultValue = {contact.phone}  /><br/>\r\n\r\n          </div>\r\n          )}\r\n        </div>\r\n        <button onClick={this.saveUsers}>Save</button>\r\n        <p>{this.state.errorMessage}</p>\r\n      </div>\r\n      </form>\r\n    //   <div>\r\n    //   <Form\r\n    //   name=\"validate_other\"\r\n    //   onFinish={this.onFinish}\r\n    \r\n    //   initialValues={{\r\n    //     rate: 3.5,\r\n    //   }}\r\n    // >\r\n    //   <Form.Item\r\n    //     label=\"name\"\r\n    //     name=\"name\"      \r\n    //   > \r\n    //     <Input defaultValue={this.state.userInfo.name} />\r\n    //   </Form.Item>\r\n    //   <Form.Item\r\n    //     label=\"email\"\r\n    //     name=\"email\"  \r\n          \r\n    //   >\r\n       \r\n    //     <Input defaultValue={this.state.userInfo.email}/>\r\n    //   </Form.Item>\r\n\r\n    //   <Form.Item\r\n    //     label=\"address\"\r\n    //     name=\"address\"      \r\n    //   >\r\n    //     <Input />\r\n    //   </Form.Item>\r\n      \r\n\r\n    // </Form>\r\n    // {/* <div>\r\n    //   {contact.map((x, i) => {\r\n    //     return <span> x.name</span>\r\n    //   })}\r\n    // </div> */}\r\n    // </div>\r\n    \r\n    \r\n\r\n\r\n    )\r\n  }\r\n}\r\n\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\component\\left-nav\\index.jsx",["166","167","168"],"import React, { Component } from \"react\";\r\nimport \"./index.less\";\r\nimport { Menu } from \"antd\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport logo from \"../../assets/image/logo.png\";\r\nimport menuList from \"../../config/menuConfig\";\r\nimport memoryUtils from \"../../utils/memoryUtils\";\r\n/* \r\n左侧导航的组件\r\n */\r\nconst { SubMenu } = Menu;\r\nclass LeftNav extends Component {\r\n  // state = {\r\n  //   current: \"1\",\r\n  // };\r\n  getMenuNodes_map = (menuList) => {\r\n    // map加递归\r\n    return menuList.map((item) => {\r\n      /* \r\n      title\r\n      key\r\n      icon\r\n      chilren 可能有 */\r\n      if (!item.children) {\r\n        return (\r\n          <Menu.Item key={item.key} icon={item.icon}>\r\n            <Link to={item.key}>{item.title}</Link>\r\n          </Menu.Item>\r\n        );\r\n      } else {\r\n        return (\r\n          <SubMenu key={item.key} icon={item.icon} title={item.title}>\r\n            {this.getMenuNodes(item.children)}\r\n          </SubMenu>\r\n        );\r\n      }\r\n    });\r\n  };\r\n  //查看item是否有授权\r\n  hasAuth = (item) =>{\r\n    const key = item.key\r\n    // const menus = memoryUtils.user.role.menus\r\n    // const username = memoryUtils.user.username\r\n    const menus = \"admin\"\r\n    const username = \"admin\"\r\n    // console.log(username)\r\n    /*\r\n    1.如果当前用户是admin,直接通过 \r\n    2.如果当前item是公开的\r\n    3.当前用户有此item的权限\r\n     */\r\n    if(username==='admin'||key==='./home'||menus.indexOf(key)!==-1){\r\n      return true\r\n    }else if(item.children){//有一个子item的权限,\r\n      return !!item.children.find(child =>menus.indexOf(child.key)!==-1)\r\n    }\r\n    return false\r\n  }\r\n  //改用reduce调用\r\n  getMenuNodes = (menuList) => {\r\n    const path = this.props.location.pathname;\r\n    return menuList.reduce((pre, item) => {\r\n      //查看当前用户是否有item对应的权限\r\n      if (this.hasAuth(item)) {\r\n        //像pre中添加《item》或者《submenu》\r\n        if (!item.children) {\r\n          pre.push(\r\n            <Menu.Item key={item.key} icon={item.icon}>\r\n              <Link to={item.key}>{item.title}</Link>\r\n            </Menu.Item>\r\n          );\r\n        } else {\r\n          const cItem = item.children.find(\r\n            (cItem) => 0 === path.indexOf(cItem.key)\r\n          );\r\n          //如果存在，说明当前item的子列表需要打开\r\n          if (cItem) {\r\n            this.openkey = item.key;\r\n          }\r\n\r\n          pre.push(\r\n            <SubMenu key={item.key} icon={item.icon} title={item.title}>\r\n              {this.getMenuNodes(item.children)}\r\n            </SubMenu>\r\n          );\r\n        }\r\n      }\r\n      return pre; //记住return pre\r\n    }, []);\r\n  };\r\n  handleClick = (e) => {\r\n    // console.log(\"click \", e);\r\n    this.setState({\r\n      current: e.key,\r\n    });\r\n  };\r\n  //在第一次render之前执行一次，为第一次render准备数据（必须同步）\r\n  UNSAFE_componentWillMount() {\r\n    this.menuNodes = this.getMenuNodes(menuList);\r\n  }\r\n  render() {\r\n    // console.log(this)\r\n    let path = this.props.location.pathname;\r\n    // console.log(path)\r\n    if (path.indexOf(\"/product\") === 0) {\r\n      //当前请求的是商品或其子路由界面\r\n      path = \"/product\";\r\n    }\r\n    const openkey = this.openkey;\r\n    // this.setState({current:path})\r\n    return (\r\n      <div>\r\n        <Link to=\"/\" className=\"left-nav-header\">\r\n          {/* <img src={logo} alt=\"logo\" /> */}\r\n          <h1></h1>\r\n        </Link>\r\n\r\n        {/* <br />\r\n        <br /> */}\r\n        <Menu\r\n          theme=\"dark\"\r\n          onClick={this.handleClick}\r\n          style={{ width: 200 }}\r\n          defaultOpenKeys={[openkey]}\r\n          selectedKeys={[path]}\r\n          mode=\"inline\"\r\n        >\r\n          {this.menuNodes}\r\n        </Menu>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(LeftNav);\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\component\\header\\index.jsx",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\role\\add-form.jsx",["169"],"import React, { PureComponent } from \"react\";\r\nimport { Form, Input } from \"antd\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Item = Form.Item;\r\n// const Option = Select.Option;\r\nexport default class AddForm extends PureComponent {\r\n  static propTypes = {\r\n    setInput: PropTypes.func.isRequired,\r\n  };\r\n  render() {\r\n    // const { categorys } = this.props;\r\n    const formItemLayout = {\r\n        labelCol: { span: 4 }, //左侧label宽度\r\n        wrapperCol: { span: 10 }, //右侧包裹输入框宽度\r\n      };\r\n    return (\r\n      <Form >\r\n      {/* <Form onValuesChange={this.onFinish}> */}\r\n        <Item\r\n        {...formItemLayout}\r\n          name=\"input\"\r\n          label=\"角色名称\"\r\n          name=\"username\"\r\n          rules={[{ required: true, message: \"名称必须输入!\" }]}\r\n        >\r\n          <Input\r\n         \r\n            initialvalues=\"请输入角色名称\"\r\n            ref={(input) =>{ \r\n                this.props.setInput(input)\r\n            }}\r\n          ></Input>\r\n        </Item>\r\n        {/* <Item></Item><Input></Input>\r\n                <Input></Input> */}\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\dataUtils.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\utils\\constant.js",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\config\\menuConfig.js",["170","171","172","173","174","175"],"import {HomeOutlined,AppstoreAddOutlined,BarsOutlined,ToolOutlined,UserOutlined,SafetyOutlined,AreaChartOutlined,BarChartOutlined,PieChartFilled,LineChartOutlined} from '@ant-design/icons';\r\n\r\nconst menuList = [\r\n  {\r\n    title: \"Home\", // 菜单标题名称\r\n    key: \"/home\", // 对应的 path\r\n    icon: <HomeOutlined/>, // 图标名称\r\n  },\r\n  {\r\n    title: \"Summary\",\r\n    key: \"/user\",\r\n    icon: <UserOutlined />,\r\n  },\r\n  {\r\n    title: \"TimeSheet\",\r\n    key: \"/product\",\r\n    icon: <AppstoreAddOutlined />,\r\n    // children: [\r\n    //   // 子菜单列表\r\n    //   {\r\n    //     title: \"品类管理\",\r\n    //     key: \"/category\",\r\n    //     icon: <BarsOutlined />,\r\n    //   },\r\n    //   {\r\n    //     title: \"商品管理\",\r\n    //     key: \"/product\",\r\n    //     icon: <ToolOutlined />,\r\n    //   },\r\n    // ],\r\n  },\r\n  \r\n  {\r\n    title: \"Profile\",\r\n    key: \"/role\",\r\n    icon: <SafetyOutlined />,\r\n  }\r\n  \r\n];\r\nexport default menuList;\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\users\\user-form.jsx",[],"C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\category\\addform.jsx",["176"],"import React, { Component } from 'react'\r\nimport {Form,Select,Input} from 'antd'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Item = Form.Item\r\nconst Option = Select.Option\r\nexport default class AddForm extends Component {\r\n    static propTypes = {\r\n        categorys:PropTypes.array.isRequired,\r\n        setClasses:PropTypes.func.isRequired,\r\n        setInput:PropTypes.func.isRequired\r\n    }\r\n    render() {\r\n        const {categorys}= this.props\r\n        return (\r\n            \r\n            <Form onValuesChange={this.onFinish}>\r\n                <Item name='classer'>\r\n                <Select initialValues='0' ref={input =>this.props.setClasses(input)}>\r\n                    <Option value='0'>一级分类</Option>\r\n                   {categorys.map(c=><Option value={c._id}>{c.name}</Option>)}\r\n                </Select>\r\n                </Item>\r\n                <Item name='input' name=\"username\"   rules={[{ required: true, message: \"名称必须输入!\" }]}>\r\n                <Input initialValues='请输入分类名称'  ref={input =>this.props.setInput(input)}></Input>\r\n                </Item>\r\n                {/* <Item></Item><Input></Input>\r\n                <Input></Input> */}\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\role\\setTree.jsx",["177"],"import React, { Component } from \"react\";\r\nimport { Tree, Input, Form } from \"antd\";\r\nimport menuConfig from \"../../config/menuConfig\";\r\nimport menuList from \"../../config/menuConfig\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default class SetTree extends Component {\r\n  static propTypes = {\r\n    role: PropTypes.object.isRequired,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const { menus } = this.props.role;\r\n    // console.log(menus)\r\n    this.state = {\r\n      checkedKeys: menus,\r\n    };\r\n    // this.setRole=setRole\r\n    // this.setState({\r\n    //     checkedKeys:menus,\r\n    // })\r\n  }\r\n  // getTreeNodes=()=>{\r\n  //     return menuList.reduce((pre,item)=>{\r\n  //         pre\r\n  //         return pre\r\n  //     },[])\r\n  // }\r\n  // UNSAFE_componentWillMount(){\r\n  //     console.log(this.props.role.menus)\r\n  //     this.setState({cheackedKeys:this.props.role.menus})\r\n  // }\r\n  /* 为父组件提交获取最新menus数据的方法 */\r\n  getMenus = () => this.state.checkedKeys;\r\n\r\n  render() {\r\n    const { role } = this.props;\r\n    const { checkedKeys } = this.state;\r\n    const treeData = menuConfig;\r\n  \r\n    const onCheck = (checkedKeys) => {\r\n      // console.log(\"onCheck\", checkedKeys);\r\n      this.setState({ checkedKeys: checkedKeys });\r\n    };\r\n    const formItemLayout = {\r\n      labelCol: { span: 4 }, //左侧label宽度\r\n      wrapperCol: { span: 10 }, //右侧包裹输入框宽度\r\n    };\r\n    // console.log(this.props);\r\n    // console.log(checkedKeys)\r\n    return (\r\n      <Form {...formItemLayout}>\r\n        <Form.Item label=\"角色名称\">\r\n          <Input value={role.name} disabled />\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Tree\r\n            checkable\r\n            //   defaultExpandedKeys={['0-0-0', '0-0-1']}\r\n            defaultExpandAll={true}\r\n            //   defaultSelectedKeys={['0-0-0', '0-0-1']}\r\n            checkedKeys={checkedKeys}\r\n            // onSelect={onSelect}\r\n            onCheck={onCheck}\r\n            treeData={treeData}\r\n          />\r\n        </Form.Item>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\pages\\category\\updateform.jsx",["178"],"import React, { Component } from 'react'\r\nimport {Form,Select,Input} from 'antd'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Item = Form.Item\r\nconst Option = Select.Option\r\nexport default class UpdateForm extends Component {\r\n    static propTypes = {\r\n        category:PropTypes.string.isRequired,\r\n        setForm:PropTypes.func.isRequired\r\n    }\r\n\r\n    render() {\r\n        const {category} = this.props\r\n        return (\r\n            <Form >\r\n                <Item   name=\"username\"   rules={[{ required: true, message: \"名称必须输入!\" }]}>\r\n                <Input     placeholder='请输入分类名称' initialValues={category}  ref={input =>this.props.setForm(input)}></Input>\r\n                </Item>\r\n                {/* <Item></Item><Input></Input>\r\n                <Input></Input> */}\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n","C:\\Users\\Y.Chen\\Desktop\\Beaconfire\\training\\Team Project 2\\frontend\\React-admin\\src\\component\\link-button\\index.jsx",[],{"ruleId":"179","replacedBy":"180"},{"ruleId":"181","replacedBy":"182"},{"ruleId":"183","severity":1,"message":"184","line":2,"column":8,"nodeType":"185","messageId":"186","endLine":2,"endColumn":12},{"ruleId":"187","severity":1,"message":"188","line":37,"column":17,"nodeType":"189","messageId":"190","endLine":37,"endColumn":19},{"ruleId":"191","severity":1,"message":"192","line":60,"column":7,"nodeType":"193","messageId":"194","endLine":60,"endColumn":13},{"ruleId":"183","severity":1,"message":"195","line":5,"column":8,"nodeType":"185","messageId":"186","endLine":5,"endColumn":19},{"ruleId":"183","severity":1,"message":"196","line":2,"column":31,"nodeType":"185","messageId":"186","endLine":2,"endColumn":36},{"ruleId":"183","severity":1,"message":"197","line":3,"column":10,"nodeType":"185","messageId":"186","endLine":3,"endColumn":19},{"ruleId":"183","severity":1,"message":"198","line":4,"column":10,"nodeType":"185","messageId":"186","endLine":4,"endColumn":21},{"ruleId":"183","severity":1,"message":"199","line":8,"column":10,"nodeType":"185","messageId":"186","endLine":8,"endColumn":20},{"ruleId":"183","severity":1,"message":"200","line":9,"column":8,"nodeType":"185","messageId":"186","endLine":9,"endColumn":16},{"ruleId":"187","severity":1,"message":"188","line":51,"column":52,"nodeType":"189","messageId":"190","endLine":51,"endColumn":54},{"ruleId":"183","severity":1,"message":"201","line":148,"column":20,"nodeType":"185","messageId":"186","endLine":148,"endColumn":30},{"ruleId":"183","severity":1,"message":"202","line":148,"column":32,"nodeType":"185","messageId":"186","endLine":148,"endColumn":37},{"ruleId":"183","severity":1,"message":"203","line":1,"column":28,"nodeType":"185","messageId":"186","endLine":1,"endColumn":36},{"ruleId":"183","severity":1,"message":"204","line":2,"column":10,"nodeType":"185","messageId":"186","endLine":2,"endColumn":17},{"ruleId":"183","severity":1,"message":"205","line":5,"column":9,"nodeType":"185","messageId":"186","endLine":5,"endColumn":19},{"ruleId":"183","severity":1,"message":"206","line":6,"column":9,"nodeType":"185","messageId":"186","endLine":6,"endColumn":16},{"ruleId":"187","severity":1,"message":"188","line":117,"column":112,"nodeType":"189","messageId":"190","endLine":117,"endColumn":114},{"ruleId":"187","severity":1,"message":"188","line":117,"column":133,"nodeType":"189","messageId":"190","endLine":117,"endColumn":135},{"ruleId":"187","severity":1,"message":"188","line":117,"column":155,"nodeType":"189","messageId":"190","endLine":117,"endColumn":157},{"ruleId":"187","severity":1,"message":"188","line":155,"column":83,"nodeType":"189","messageId":"190","endLine":155,"endColumn":85},{"ruleId":"187","severity":1,"message":"188","line":156,"column":21,"nodeType":"189","messageId":"190","endLine":156,"endColumn":23},{"ruleId":"187","severity":1,"message":"188","line":161,"column":80,"nodeType":"189","messageId":"190","endLine":161,"endColumn":82},{"ruleId":"187","severity":1,"message":"188","line":162,"column":21,"nodeType":"189","messageId":"190","endLine":162,"endColumn":23},{"ruleId":"187","severity":1,"message":"188","line":169,"column":31,"nodeType":"189","messageId":"190","endLine":169,"endColumn":33},{"ruleId":"183","severity":1,"message":"207","line":176,"column":15,"nodeType":"185","messageId":"186","endLine":176,"endColumn":23},{"ruleId":"187","severity":1,"message":"188","line":260,"column":93,"nodeType":"189","messageId":"190","endLine":260,"endColumn":95},{"ruleId":"187","severity":1,"message":"188","line":271,"column":93,"nodeType":"189","messageId":"190","endLine":271,"endColumn":95},{"ruleId":"187","severity":1,"message":"188","line":283,"column":115,"nodeType":"189","messageId":"190","endLine":283,"endColumn":117},{"ruleId":"187","severity":1,"message":"188","line":283,"column":239,"nodeType":"189","messageId":"190","endLine":283,"endColumn":241},{"ruleId":"187","severity":1,"message":"188","line":286,"column":107,"nodeType":"189","messageId":"190","endLine":286,"endColumn":109},{"ruleId":"187","severity":1,"message":"188","line":289,"column":109,"nodeType":"189","messageId":"190","endLine":289,"endColumn":111},{"ruleId":"187","severity":1,"message":"188","line":289,"column":233,"nodeType":"189","messageId":"190","endLine":289,"endColumn":235},{"ruleId":"187","severity":1,"message":"188","line":295,"column":103,"nodeType":"189","messageId":"190","endLine":295,"endColumn":105},{"ruleId":"187","severity":1,"message":"188","line":297,"column":81,"nodeType":"189","messageId":"190","endLine":297,"endColumn":83},{"ruleId":"187","severity":1,"message":"188","line":301,"column":140,"nodeType":"189","messageId":"190","endLine":301,"endColumn":142},{"ruleId":"187","severity":1,"message":"188","line":303,"column":105,"nodeType":"189","messageId":"190","endLine":303,"endColumn":107},{"ruleId":"183","severity":1,"message":"197","line":3,"column":10,"nodeType":"185","messageId":"186","endLine":3,"endColumn":19},{"ruleId":"183","severity":1,"message":"205","line":4,"column":10,"nodeType":"185","messageId":"186","endLine":4,"endColumn":20},{"ruleId":"183","severity":1,"message":"208","line":5,"column":8,"nodeType":"185","messageId":"186","endLine":5,"endColumn":15},{"ruleId":"183","severity":1,"message":"209","line":6,"column":8,"nodeType":"185","messageId":"186","endLine":6,"endColumn":15},{"ruleId":"183","severity":1,"message":"210","line":7,"column":10,"nodeType":"185","messageId":"186","endLine":7,"endColumn":13},{"ruleId":"183","severity":1,"message":"198","line":9,"column":9,"nodeType":"185","messageId":"186","endLine":9,"endColumn":20},{"ruleId":"183","severity":1,"message":"211","line":10,"column":8,"nodeType":"185","messageId":"186","endLine":10,"endColumn":20},{"ruleId":"183","severity":1,"message":"212","line":11,"column":8,"nodeType":"185","messageId":"186","endLine":11,"endColumn":16},{"ruleId":"183","severity":1,"message":"213","line":14,"column":10,"nodeType":"185","messageId":"186","endLine":14,"endColumn":14},{"ruleId":"183","severity":1,"message":"214","line":14,"column":16,"nodeType":"185","messageId":"186","endLine":14,"endColumn":21},{"ruleId":"183","severity":1,"message":"215","line":14,"column":23,"nodeType":"185","messageId":"186","endLine":14,"endColumn":34},{"ruleId":"183","severity":1,"message":"216","line":14,"column":36,"nodeType":"185","messageId":"186","endLine":14,"endColumn":42},{"ruleId":"183","severity":1,"message":"207","line":219,"column":13,"nodeType":"185","messageId":"186","endLine":219,"endColumn":21},{"ruleId":"183","severity":1,"message":"217","line":219,"column":23,"nodeType":"185","messageId":"186","endLine":219,"endColumn":31},{"ruleId":"183","severity":1,"message":"218","line":294,"column":11,"nodeType":"185","messageId":"186","endLine":294,"endColumn":18},{"ruleId":"183","severity":1,"message":"184","line":5,"column":8,"nodeType":"185","messageId":"186","endLine":5,"endColumn":12},{"ruleId":"183","severity":1,"message":"195","line":7,"column":8,"nodeType":"185","messageId":"186","endLine":7,"endColumn":19},{"ruleId":"219","severity":1,"message":"220","line":115,"column":11,"nodeType":"221","endLine":115,"endColumn":15},{"ruleId":"222","severity":1,"message":"223","line":24,"column":11,"nodeType":"224","endLine":24,"endColumn":26},{"ruleId":"183","severity":1,"message":"225","line":1,"column":42,"nodeType":"185","messageId":"186","endLine":1,"endColumn":54},{"ruleId":"183","severity":1,"message":"226","line":1,"column":55,"nodeType":"185","messageId":"186","endLine":1,"endColumn":67},{"ruleId":"183","severity":1,"message":"227","line":1,"column":96,"nodeType":"185","messageId":"186","endLine":1,"endColumn":113},{"ruleId":"183","severity":1,"message":"228","line":1,"column":114,"nodeType":"185","messageId":"186","endLine":1,"endColumn":130},{"ruleId":"183","severity":1,"message":"229","line":1,"column":131,"nodeType":"185","messageId":"186","endLine":1,"endColumn":145},{"ruleId":"183","severity":1,"message":"230","line":1,"column":146,"nodeType":"185","messageId":"186","endLine":1,"endColumn":163},{"ruleId":"222","severity":1,"message":"223","line":24,"column":36,"nodeType":"224","endLine":24,"endColumn":51},{"ruleId":"183","severity":1,"message":"231","line":4,"column":8,"nodeType":"185","messageId":"186","endLine":4,"endColumn":16},{"ruleId":"183","severity":1,"message":"232","line":6,"column":7,"nodeType":"185","messageId":"186","endLine":6,"endColumn":13},"no-native-reassign",["233"],"no-negated-in-lhs",["234"],"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ReturnStatement","expectedReturnValue","'memoryUtils' is defined but never used.","'Modal' is defined but never used.","'PAGE_SIZE' is defined but never used.","'formateDate' is defined but never used.","'reqDelUser' is defined but never used.","'UserForm' is defined but never used.","'showStatus' is assigned a value but never used.","'roles' is assigned a value but never used.","'useState' is defined but never used.","'connect' is defined but never used.","'reqContact' is defined but never used.","'message' is defined but never used.","'username' is assigned a value but never used.","'AddForm' is defined but never used.","'SetTree' is defined but never used.","'get' is defined but never used.","'storageUtils' is defined but never used.","'ReactDOM' is defined but never used.","'Form' is defined but never used.","'Input' is defined but never used.","'InputNumber' is defined but never used.","'Button' is defined but never used.","'password' is assigned a value but never used.","'contact' is assigned a value but never used.","jsx-a11y/heading-has-content","Headings must have content and the content must be accessible by a screen reader.","JSXOpeningElement","react/jsx-no-duplicate-props","No duplicate props allowed","JSXAttribute","'BarsOutlined' is defined but never used.","'ToolOutlined' is defined but never used.","'AreaChartOutlined' is defined but never used.","'BarChartOutlined' is defined but never used.","'PieChartFilled' is defined but never used.","'LineChartOutlined' is defined but never used.","'menuList' is defined but never used.","'Option' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]