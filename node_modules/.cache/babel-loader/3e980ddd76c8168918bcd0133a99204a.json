{"ast":null,"code":"var _jsxFileName = \"/Users/danyangliu/Downloads/React-admin/src/pages/role/index.jsx\";\nimport React, { Component } from \"react\";\nimport { PAGE_SIZE } from \"../../utils/constant\";\nimport { reqContact } from \"../../api\";\nimport AddForm from \"./add-form.jsx\";\nimport SetTree from \"./setTree\";\nimport { get } from \"store\";\nimport memoryUtils from '../../utils/memoryUtils';\nimport { formateDate } from '../../utils/dataUtils';\nimport storageUtils from \"../../utils/storageUtils\";\n/* 角色路由 */\n// export default class Role extends Component {\n//   state = {\n//     loading: false,\n//     roles: [],\n//     role: {},\n//     showStatus: 0,\n//   };\n//   constructor(props){\n//       super(props)\n//       this.auth= React.createRef()\n//   }\n//   getRoles = async () => {\n//     const result = await reqRoleList();\n//     if (result.status === 0) {\n//       const roles = result.data;\n//       this.setState({\n//         roles,\n//       });\n//     }\n//   };\n//   initColumn = () => {\n//     this.columns = [\n//       {\n//         title: \"角色名称\",\n//         dataIndex: \"name\",\n//       },\n//       {\n//         title: \"创建时间\",\n//         dataIndex: \"create_time\",\n//         render:(create_time)=>formateDate(create_time)\n//       },\n//       {\n//         title: \"授权时间\",\n//         dataIndex: \"auth_time\",\n//         render:(auth_time)=>formateDate(auth_time)\n//       },\n//       {\n//         title: \"授权人\",\n//         dataIndex: \"auth_name\",\n//       },\n//     ];\n//   };\n//   handleCancel = () => {\n//     this.setState({ showStatus: 0 });\n//   };\n//   addRole = async () => {\n//     const result = await reqAddRole(this.input.props.value);\n//     if (result.status === 0) {\n//       message.success(\"添加角色成功\");\n//       // this.getRoles()\n//       // 可以不请求直接添加到roles列表\n//       const role = result.data;\n//       // const roles =[...this.state.roles]\n//       // roles.push(role)\n//       // this.setState({roles:roles})\n//       this.setState((state) => ({\n//         roles: [...state.roles, role],\n//       }));\n//     } else {\n//       message.error(\"添加角色失败\");\n//     }\n//     this.setState({ showStatus: 0 });\n//   };\n//   setRole = async() => {\n//     //   console.log('select',select)\n//      const menus =  this.auth.current.getMenus()\n//      const role = this.state.role\n//      role.menus=menus\n//      role.auth_time = Date.now()\n//      role.auth_name = memoryUtils.user.username\n//     //  console.log(role)\n//      const result = await reqUpdateRole(role)\n//      if(result.status===0){\n//          message.success('设置权限成功')\n//          //如果更新的是自己角色权限,强制退出\n//         if(memoryUtils.user.username!=='admin'&&role._id===memoryUtils.user.role_id){\n//           memoryUtils.user={}\n//           storageUtils.deleteUser()\n//           this.props.history.replace('./login')\n//           message.info('权限已更改,请重新登录')\n//         }\n//      }else{\n//          message.error('设置权限失败')\n//      }\n//     this.setState({ showStatus: 0 });\n//   };\n//   componentDidMount() {\n//     this.getRoles();\n//   }\n//   UNSAFE_componentWillMount() {\n//     this.initColumn();\n//   }\n//   render() {\n//     const { roles, role, showStatus } = this.state;\n//     // const {username, totalHours, comments, approvalStatus,submissionStatus}=this.props.location.state.user\n//     const title = (\n//       <span>\n//         <Button type=\"primary\" onClick={() => this.setState({ showStatus: 1 })}>\n//           创建角色\n//         </Button>\n//         <Button\n//           type=\"primary\"\n//           onClick={() => this.setState({ showStatus: 2 })}\n//           disabled={!role._id}\n//         >\n//           设置角色权限\n//         </Button>\n//       </span>\n//     );\n//     // console.log(roles)\n//     // console.log(this.columns)\n//     return (\n//       <Card title={title}>\n//         <Table\n//           rowKey=\"_id\"\n//           pagination={{\n//             pageSize: PAGE_SIZE,\n//             // , total: 50\n//           }}\n//           dataSource={roles}\n//           columns={this.columns}\n//           loading={this.state.loading}\n//           rowSelection={{ type: \"radio\", selectedRowKeys: [role._id],onSelect:(role)=>{\n//             this.setState({role:role})} \n//           }} //设置单选\n//           onRow={(role) => {\n//             return {\n//               onSelect:(event) => {\n//                 this.setState({ role });\n//               },\n//               onClick: (event) => {\n//                 this.setState({ role });\n//               }, // 点击行\n//               onDoubleClick: (event) => {},\n//               onContextMenu: (event) => {},\n//               onMouseEnter: (event) => {}, // 鼠标移入行\n//               onMouseLeave: (event) => {},\n//             };\n//           }}\n//           bordered\n//         />\n//         <Modal\n//           title=\"添加角色\"\n//           visible={showStatus === 1}\n//           onOk={this.addRole}\n//           onCancel={this.handleCancel}\n//           destroyOnClose={true}\n//         >\n//           <AddForm\n//             categoryName\n//             setInput={(input) => {\n//               this.input = input;\n//             }}\n//           />\n//         </Modal>\n//         <Modal\n//           title=\"设置角色权限\"\n//           visible={showStatus === 2}\n//           onOk={this.setRole}\n//           onCancel={this.handleCancel}\n//           destroyOnClose={true}\n//         >\n//           <SetTree role={role} ref={this.auth}/>\n//         </Modal>\n//       </Card>\n//     );\n//   }\n// }\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Role extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      fetch(\"/user/user/get\" + this.state.username).then(response => response.json()).then(jsonData => {\n        this.saveUsers();\n        this.setState({\n          phone: jsonData[0][\"phone\"],\n          email: jsonData[0][\"email\"],\n          address: jsonData[0][\"address\"],\n          emergencyContact: jsonData[0][\"emergencyContact\"]\n        });\n      }).catch(error => {\n        console.error(error);\n      });\n    };\n\n    this.saveUsers = async () => {\n      console.log(this.state.test);\n      const params = {\n        id: 'admin',\n        name: '用户'\n      };\n      const mylista = storageUtils.getList();\n      console.log(\"mylista=>\", mylista);\n      const result = await reqContact(\"abc\", \"mytest1\", \"mytest2\");\n      this.setState({\n        mylist: mylista[0]\n      });\n      console.log(\"this.state.mylist=>\", this.state.mylist[0].week[0]);\n\n      if (true) {\n        const users = result;\n        console.log(result);\n        console.log(users); // this.initRoles(roles);\n\n        this.setState({\n          users\n        });\n      } else {// message.error(\"failsed\");\n      }\n    };\n\n    this.state = {\n      mylist: [],\n      user: {\n        username: \"tester\",\n        phone: \"0000000000\",\n        email: \"email@email.com\",\n        address: \"123 Sesame Street\",\n        emergencyContact: [{\n          name: \"John Doe\",\n          phone: \"1111111111\"\n        }, {\n          name: \"First M. Last\",\n          phone: \"0123456789\"\n        }]\n      },\n      test: {\n        username: \"tester\",\n        phone: \"0000000000\"\n      },\n      errorMessage: \"\"\n    }; // this.buttonClick = this.buttonClick.bind(this)\n  }\n\n  UNSAFE_componentWillMount() {\n    this.saveUsers();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"a:\", this.state.mylist.map((x, i) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"box\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"name\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: x.hours\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"                  \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 12\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: x.comments\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 12\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 12\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"name\",\n              children: \" \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 12\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 19\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Contact\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"phone\",\n          value: this.state.user.phone,\n          onChange: e => {}\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 106\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"email\",\n          value: this.state.user.email,\n          onChange: e => {}\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 106\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"address\",\n          value: this.state.user.address,\n          onChange: e => {}\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 110\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: this.state.user.emergencyContact.map((contact, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Emergency Contact \", index + 1]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"First Name, Last Name\",\n            value: contact.name,\n            onChange: e => {\n              this.setState(prevState => {\n                let s = Object.assign({}, prevState);\n                s.emergencyContact[index].name = e.target.value;\n                return {\n                  s\n                };\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 243\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"phone\",\n            value: contact.phone,\n            onChange: e => {\n              this.setState(prevState => {\n                let s = Object.assign({}, prevState);\n                s.emergencyContact[index].phone = e.target.value;\n                return {\n                  s\n                };\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 229\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.saveUsers,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: this.state.errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/danyangliu/Downloads/React-admin/src/pages/role/index.jsx"],"names":["React","Component","PAGE_SIZE","reqContact","AddForm","SetTree","get","memoryUtils","formateDate","storageUtils","Role","constructor","props","componentDidMount","fetch","state","username","then","response","json","jsonData","saveUsers","setState","phone","email","address","emergencyContact","catch","error","console","log","test","params","id","name","mylista","getList","result","mylist","week","users","user","errorMessage","UNSAFE_componentWillMount","render","map","x","i","hours","comments","e","contact","index","prevState","s","Object","assign","target","value"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAkC,OAAlC;AAEA,SAASC,SAAT,QAA0B,sBAA1B;AACA,SAASC,UAAT,QAA0B,WAA1B;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,GAAT,QAAoB,OAApB;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,SAAQC,WAAR,QAA0B,uBAA1B;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,eAAe,MAAMC,IAAN,SAAmBT,SAAnB,CAA6B;AAE1CU,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UA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","sourcesContent":["import React, { Component, } from \"react\";\nimport { Card, Button, Table, Modal, message } from \"antd\";\nimport { PAGE_SIZE } from \"../../utils/constant\";\nimport { reqContact} from \"../../api\";\nimport AddForm from \"./add-form.jsx\";\nimport SetTree from \"./setTree\";\nimport { get } from \"store\";\nimport memoryUtils from '../../utils/memoryUtils'\nimport {formateDate} from '../../utils/dataUtils'\nimport storageUtils from \"../../utils/storageUtils\";\n/* 角色路由 */\n// export default class Role extends Component {\n//   state = {\n//     loading: false,\n//     roles: [],\n//     role: {},\n//     showStatus: 0,\n//   };\n//   constructor(props){\n//       super(props)\n//       this.auth= React.createRef()\n//   }\n//   getRoles = async () => {\n//     const result = await reqRoleList();\n//     if (result.status === 0) {\n//       const roles = result.data;\n//       this.setState({\n//         roles,\n//       });\n//     }\n//   };\n//   initColumn = () => {\n//     this.columns = [\n//       {\n//         title: \"角色名称\",\n//         dataIndex: \"name\",\n//       },\n//       {\n//         title: \"创建时间\",\n//         dataIndex: \"create_time\",\n//         render:(create_time)=>formateDate(create_time)\n//       },\n//       {\n//         title: \"授权时间\",\n//         dataIndex: \"auth_time\",\n//         render:(auth_time)=>formateDate(auth_time)\n//       },\n//       {\n//         title: \"授权人\",\n//         dataIndex: \"auth_name\",\n//       },\n//     ];\n//   };\n//   handleCancel = () => {\n//     this.setState({ showStatus: 0 });\n//   };\n//   addRole = async () => {\n//     const result = await reqAddRole(this.input.props.value);\n//     if (result.status === 0) {\n//       message.success(\"添加角色成功\");\n//       // this.getRoles()\n//       // 可以不请求直接添加到roles列表\n//       const role = result.data;\n//       // const roles =[...this.state.roles]\n//       // roles.push(role)\n//       // this.setState({roles:roles})\n//       this.setState((state) => ({\n//         roles: [...state.roles, role],\n//       }));\n//     } else {\n//       message.error(\"添加角色失败\");\n//     }\n//     this.setState({ showStatus: 0 });\n//   };\n//   setRole = async() => {\n//     //   console.log('select',select)\n//      const menus =  this.auth.current.getMenus()\n//      const role = this.state.role\n//      role.menus=menus\n//      role.auth_time = Date.now()\n//      role.auth_name = memoryUtils.user.username\n//     //  console.log(role)\n//      const result = await reqUpdateRole(role)\n//      if(result.status===0){\n//          message.success('设置权限成功')\n//          //如果更新的是自己角色权限,强制退出\n//         if(memoryUtils.user.username!=='admin'&&role._id===memoryUtils.user.role_id){\n//           memoryUtils.user={}\n//           storageUtils.deleteUser()\n//           this.props.history.replace('./login')\n//           message.info('权限已更改,请重新登录')\n//         }\n//      }else{\n//          message.error('设置权限失败')\n//      }\n//     this.setState({ showStatus: 0 });\n//   };\n//   componentDidMount() {\n//     this.getRoles();\n//   }\n//   UNSAFE_componentWillMount() {\n//     this.initColumn();\n//   }\n//   render() {\n//     const { roles, role, showStatus } = this.state;\n//     // const {username, totalHours, comments, approvalStatus,submissionStatus}=this.props.location.state.user\n//     const title = (\n//       <span>\n//         <Button type=\"primary\" onClick={() => this.setState({ showStatus: 1 })}>\n//           创建角色\n//         </Button>\n//         <Button\n//           type=\"primary\"\n//           onClick={() => this.setState({ showStatus: 2 })}\n//           disabled={!role._id}\n//         >\n//           设置角色权限\n//         </Button>\n//       </span>\n//     );\n\n//     // console.log(roles)\n//     // console.log(this.columns)\n//     return (\n//       <Card title={title}>\n//         <Table\n//           rowKey=\"_id\"\n//           pagination={{\n//             pageSize: PAGE_SIZE,\n//             // , total: 50\n//           }}\n//           dataSource={roles}\n//           columns={this.columns}\n//           loading={this.state.loading}\n//           rowSelection={{ type: \"radio\", selectedRowKeys: [role._id],onSelect:(role)=>{\n//             this.setState({role:role})} \n//           }} //设置单选\n//           onRow={(role) => {\n//             return {\n//               onSelect:(event) => {\n//                 this.setState({ role });\n//               },\n//               onClick: (event) => {\n//                 this.setState({ role });\n//               }, // 点击行\n//               onDoubleClick: (event) => {},\n//               onContextMenu: (event) => {},\n//               onMouseEnter: (event) => {}, // 鼠标移入行\n//               onMouseLeave: (event) => {},\n//             };\n//           }}\n//           bordered\n//         />\n//         <Modal\n//           title=\"添加角色\"\n//           visible={showStatus === 1}\n//           onOk={this.addRole}\n//           onCancel={this.handleCancel}\n//           destroyOnClose={true}\n//         >\n//           <AddForm\n//             categoryName\n//             setInput={(input) => {\n//               this.input = input;\n//             }}\n//           />\n//         </Modal>\n//         <Modal\n//           title=\"设置角色权限\"\n//           visible={showStatus === 2}\n//           onOk={this.setRole}\n//           onCancel={this.handleCancel}\n//           destroyOnClose={true}\n//         >\n//           <SetTree role={role} ref={this.auth}/>\n//         </Modal>\n//       </Card>\n//     );\n//   }\n// }\nexport default class Role extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      mylist:[],\n      user:{\n        username: \"tester\",\n        phone: \"0000000000\",\n        email: \"email@email.com\",\n        address: \"123 Sesame Street\",\n        emergencyContact: [\n          {\n            name: \"John Doe\", \n            phone: \"1111111111\"\n          },\n          {\n            name: \"First M. Last\",\n            phone: \"0123456789\"\n          }\n        ]\n      },\n      test:{\n        username: \"tester\",\n        phone: \"0000000000\"\n    \n      },\n      errorMessage:\"\"\n    }\n    // this.buttonClick = this.buttonClick.bind(this)\n  }\n  UNSAFE_componentWillMount() {\n    this.saveUsers();\n  }\n\n  componentDidMount = () => {\n    fetch(\"/user/user/get\" + this.state.username)\n        .then(response => response.json())\n        .then(jsonData => {\n          this.saveUsers();\n            \n            this.setState({\n                phone: jsonData[0][\"phone\"],\n                email: jsonData[0][\"email\"],\n                address: jsonData[0][\"address\"],\n                emergencyContact: jsonData[0][\"emergencyContact\"]\n            })\n        })\n        .catch((error) => {\n            console.error(error);\n        })\n  }\n\n\n\n  saveUsers = async () => {\n    console.log(this.state.test);\n    const params = { id: 'admin', name: '用户' }\n    \n    const mylista = storageUtils.getList();\n    console.log(\"mylista=>\" ,mylista);\n    \n    \n    const result = await reqContact(\"abc\",\"mytest1\", \"mytest2\");\n    this.setState({mylist: mylista[0]});\n    console.log(\"this.state.mylist=>\" ,this.state.mylist[0].week[0])\n    if (true) {\n      const  users  = result;\n      console.log(result)\n      console.log(users)\n      // this.initRoles(roles);\n      this.setState({ users});\n    } else {\n      // message.error(\"failsed\");\n    }\n  };\n\n  render() {\n    \n    return (\n\n      <div>\n        <div>\n          a:\n        {this.state.mylist.map((x, i)=>{\n           return <div key={i} className=\"box\">\n          \n           <div className=\"name\"><span>{x.hours}</span> \n           <span>                  </span>\n           <span>{x.comments}</span></div>  \n           <div className=\"name\"> </div>     \n         </div>\n\n        })}\n        </div>\n        <div>\n          <h3>Contact</h3>\n\n          <input type = 'text' placeholder='phone' value = {this.state.user.phone} onChange={(e) => {}}/><br/>\n          <input type = 'text' placeholder='email' value = {this.state.user.email} onChange={(e) => {}}/><br/>\n          <input type = 'text' placeholder='address' value = {this.state.user.address} onChange={(e) => {}}/><br/>\n        </div>\n        <div>\n          {this.state.user.emergencyContact.map((contact, index) =>\n          <div>\n            <h3>Emergency Contact {index + 1}</h3>\n            <input type = 'text' placeholder='First Name, Last Name' value = {contact.name} onChange={(e) => {this.setState(prevState => {let s = Object.assign({}, prevState); s.emergencyContact[index].name = e.target.value; return {s};})}}/><br/>\n            <input type = 'text' placeholder='phone' value = {contact.phone} onChange={(e) => {this.setState(prevState => {let s = Object.assign({}, prevState); s.emergencyContact[index].phone = e.target.value; return {s};})}}/><br/>\n          </div>\n          )}\n        </div>\n        <button onClick={this.saveUsers}>Save</button>\n        <p>{this.state.errorMessage}</p>\n      </div>\n    )\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}